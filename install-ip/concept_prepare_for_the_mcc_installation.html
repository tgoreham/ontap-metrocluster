<!DOCTYPE html>
<html lang="en">
  <head class="at-element-marker">
  <title>Preparing for the MetroCluster installation</title>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge,chrome=1">
  <meta http-equiv="language" content="en">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta property="og:title" content="Preparing for the MetroCluster installation" />
	<meta property="og:type" content="website" />
	<meta property="og:url" content="https://docs.netapp.com/us-en/ontap-metrocluster/install-ip/concept_prepare_for_the_mcc_installation.html" />
	<meta property="og:description" content="As you prepare for the MetroCluster installation, you should understand the MetroCluster hardware architecture and required components." />
  <meta property="og:image" content="https://docs.netapp.com/us-en/ontap-metrocluster/images/logo-tophat-social.png" />
  <meta property="og:image:alt" content="NetApp Logo" />
  <meta name="format-detection" content="telephone=no">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="encoding" content="utf-8">
  <meta http-equiv="nss-type" content="Product Documentation"/>
  <meta http-equiv="nss-subtype" content="User Guide"/>
  
  <meta name="description" content="As you prepare for the MetroCluster installation, you should understand the MetroCluster hardware architecture and required components.">
  <meta name="keywords" content=" prepare, metrocluster, installation, hardware, architecture, require, component, preparing, difference, ontap, configuration, consideration, mediator, tiebreaker, ip, automatic, drive, assignment, adp, system, san, array, system, configuring, configure, cluster, peer, isl, sharing, share, private, layer, network, compliant, switch, virtual, border, gateway, protocol, tdm, wdm, encryption, equipment, unmirrored, aggregate, firewall, site, usage, preconfigure, setting, system, factory, metrocluster-compliant switch, layer 2 network, netapp-validated switch, shared backend switch">
  
  

  <!-- Icons -->
  <link rel="icon" href="/us-en/ontap-metrocluster/images/favicon.ico" type="image/x-icon">

  <!-- RSS Feed -->
  

  <!-- CSS Definitions: NetApp CSS should be defined after generic css -->

  <!-- Elastic Search -->
  <link rel="stylesheet" href="//cdn.jsdelivr.net/searchkit/0.10.0/theme.css">

  <!-- Controls AsciiDoctor Admonition Blocks -->
  <link rel="stylesheet" type="text/css" href="/us-en/ontap-metrocluster/css/font-awesome.min.css">

  <!-- Controls the shadow effect for search dropdown menu -->
  <link rel="stylesheet" href="/us-en/ontap-metrocluster/css/boxshadowproperties.css">

  <!-- NetApp CSS controls the technical content -->
  <link rel="stylesheet" type="text/css" href="/us-en/ontap-metrocluster/css/netapp.css">

  <!-- WWW CSS Content -->
  <link rel="stylesheet" type="text/css" href="/us-en/ontap-metrocluster/css/www-luci-dotcom.min.css">
  <link rel="stylesheet" type="text/css" href="/us-en/ontap-metrocluster/css/www-netapp-dotcom.css">
  <link rel="stylesheet" href="/us-en/ontap-metrocluster/css/www-netapp-library-critical.min.css" media="all" >
  <link rel="stylesheet" href="/us-en/ontap-metrocluster/css/www-netapp-library-non-critical.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <link rel="stylesheet" href="/us-en/ontap-metrocluster/css/www-netapp-library-global-header-footer.min.css">

  <!-- NetApp IE Customizations -->
  <link rel="stylesheet" href='/us-en/ontap-metrocluster/css/na-utility.css' type='text/css'>
  <link rel="stylesheet" href='/us-en/ontap-metrocluster/css/na-sidebar.css' type='text/css'>
  <link rel='stylesheet' href='/us-en/ontap-metrocluster/css/clouddocs.css' type='text/css'>
  <link rel='stylesheet' href='/us-en/ontap-metrocluster/css/na-pagenav.css' type='text/css'>

  
  <link rel="stylesheet" href="/us-en/ontap-metrocluster/css/astra.css" type="text/css">
  

  
  <link rel='stylesheet' href='/us-en/ontap-metrocluster/css/na-feature.css' type='text/css'>
  


  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
  <!-- Used to import Promise for IE. Required for SearchKit -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/bluebird/3.3.5/bluebird.min.js"></script>
  
    <script src='/us-en/ontap-metrocluster/js/na-search.js'></script>
  

  
  <script src='/us-en/ontap-metrocluster/js/na-pagenav.js'></script>
  

  <link rel='stylesheet' href='/us-en/ontap-metrocluster/css/prism.css' type='text/css'>
  <link rel='stylesheet' href='/us-en/ontap-metrocluster/css/prism-netapp.css' type='text/css'>


  <script src='/us-en/ontap-metrocluster/js/na-utility.js'></script>
  <script src='/us-en/ontap-metrocluster/js/clouddocs.js'></script>
  <script>
  if (document.location.hostname === "docs.netapp.com") {
    var head = document.getElementsByTagName('head')[0];
    var adobe = document.createElement("script");
    adobe.type = "text/javascript";
    adobe.src = "//assets.adobedtm.com/60287eadf1ee/c284da483c83/launch-e9ff3acac59f.min.js";
    head.appendChild(adobe);
  }
  </script>
  <script src='/us-en/ontap-metrocluster/js/jquery.navgoco.min.js'></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
  <script src='/us-en/ontap-metrocluster/js/toc.js'></script>
  <script src='/us-en/ontap-metrocluster/js/customscripts.js'></script>

  <script>
      $(document).ready(function() {
          
          var collapseOnInit = true;
          

          var navSettings = {
              "caretHtml": '',
              "accordion": collapseOnInit,
              "openClass": 'active', // open
              "save": false, // leave false or nav highlighting doesn't work right
              "cookie": {
                  "name": 'navgoco',
                  "expires": false,
                  "path": '/'
              },
              "slide": {
                  "duration": 400,
                  "easing": 'swing'
              }
          };

          // Initialize navgoco with default options
          $("#mysidebar").navgoco(navSettings);
          

          $("#collapseAll").click(function(e) {
              e.preventDefault();
              $("#mysidebar").navgoco('toggle', false);
          });

          $("#expandAll").click(function(e) {
              e.preventDefault();
              $("#mysidebar").navgoco('toggle', true);
          });

      });

  </script>
  <script>
      $(document).ready(function() {
          $("#tg-sb-link").click(function() {
              $("#tg-sb-sidebar").toggle();
              $("#tg-sb-content").toggleClass('col-md-9');
              $("#tg-sb-content").toggleClass('col-md-12');
              $("#tg-sb-icon").toggleClass('fa-toggle-on');
              $("#tg-sb-icon").toggleClass('fa-toggle-off');
          });
      });
  </script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-81697994-3"></script>
  <script>
  if (document.location.hostname === "docs.netapp.com") {
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-81697994-3');
  }
  </script>
</head>


  <body class role="document">
    <div id="page" class="n-off-canvas-menu">
      <div class="n-off-canvas-menu__menu"><!--TODO: Add offcanvas code --></div>
      <div class="n-off-canvas-menu__content-wrap">
        <header class="site-header" id="banner">
  <!-- Start top_hat -->
  <div class="n-top-hat">
    <div class="n-container">
      <div class="n-top-hat__cross-property-nav">
        <ul class="n-top-hat__list">
          <li class="n-top-hat__list-item">
            <a href="https://www.netapp.com/products-a-z/" class="n-top-hat__link">Product and Solutions</a>
          </li>
          <li class="n-top-hat__list-item">
            <a href="https://www.netapp.com/support-and-training/netapp-university/" class="n-top-hat__link">Support and Training</a>
          </li>
          <li class="n-top-hat__list-item">
            <a href="https://cloud.netapp.com" class="n-top-hat__link">Cloud Central</a>
          </li>
          <li class="n-top-hat__list-item">
            <a href="https://community.netapp.com/" class="n-top-hat__link">Community</a>
          </li>
          <li class="n-top-hat__list-item">
            <a href="https://blog.netapp.com/" class="n-top-hat__link">Blog</a>
          </li>
          <li class="n-top-hat__list-item">
            <a href="https://customers.netapp.com/en/" class="n-top-hat__link">Customer Stories</a>
          </li>
          <li class="n-top-hat__list-item">
            <a href="https://www.netapp.com/us/contact-us/index.aspx" target="_self" class="n-top-hat__link" data-ntap-ui="contact-us">Contact</a>
          </li>
        </ul>
      </div>
      <div class="n-top-hat__utils">
        <ul class="n-top-hat__list">
          <li class="n-top-hat__list-item">
            <a href="https://www.netapp.com/us/contact-us/index.aspx" target="_self" class="n-top-hat__link" data-ntap-ui="contact-us">Contact</a>
          </li>
        </ul>
      </div>
    </div>
  </div>
  <!-- End top_hat -->

  <!-- Start property bar -->
  <style>
    .n-property-navigation-bar__menus--desktop-experience .n-menu--mega__default-content__heading span {
    color: #34B0FF;
    }
  </style>
  <div class="n-property-bar " data-ntap-ui="sticky-nav">
    <div class="n-property-bar__inner-wrap">
      <div class="n-property-bar__menu-toggle">
        <a href="#" class="n-property-bar__menu-toggle-link">
          <span class="n-property-bar__menu-toggle-text">Menu</span>
          <svg class="n-icon-bars n-property-bar__menu-toggle-icon" aria-labelledby="title">
            <title>bars</title>
            <use xlink:href="/us-en/ontap-metrocluster/common/svg/sprite.svg#bars"></use>
          </svg>
        </a>
      </div>
      <div class="n-property-bar__property-mark ">
        <a href="https://www.netapp.com" class="n-property-bar__property-link">
          <div class="n-property-bar__logo">
            <svg class="n-icon-netapp-mark n-icon-netapp-mark n-property-bar__netapp-mark-icon" aria-labelledby="title">
              <title>netapp-mark</title>
              <use xlink:href="/us-en/ontap-metrocluster/common/svg/sprite.svg#netapp-mark"></use>
            </svg>
            <svg class="n-icon-netapp-logo n-property-bar__logo-svg" aria-labelledby="title">
              <title>netapp-logo</title>
              <use xlink:href="/us-en/ontap-metrocluster/common/svg/sprite.svg#netapp-logo"></use>
            </svg>
          </div>
        </a>
      </div>

      
      <div class="search-property-bar">
        <div id="search-demo-container" class="searchbox n-property-bar__search">
          <div id="react-search" data-type="widget" data-placeholder="Search Documentation" data-no-results-found="No results were found for {query}" data-did-you-mean="Search for {suggestion}." data-no-results-found-did-you-mean="No results found for {query}. Did you mean {suggestion}?" data-results-found="{hitCount} results found"  ></div>
          <button class="n-property-bar__search-toggle-button" type="button">
            <svg class="n-icon-search n-property-bar__search-toggle-button-icon" aria-labelledby="title">
              <title>search</title>
              <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/us-en/ontap-metrocluster/common/svg/sprite.svg#search"></use>
            </svg>
          </button>
        </div>
      </div>
      
    </div>
  </div>
  <div class="n-property-bar__toolbar"><!-- Start Language Selector --><!-- End Language Selector -->

    <div class="n-property-bar__cta"></div>
  </div>
  <script>
    $(function(){
        var currentLocalization = $('html').attr('lang');

        var localizationsDictionary = {
            "en-CA" : "https://www.netapp.com/search/index.aspx?for_cr=canada&",
            "en-IN" : "https://www.netapp.com/search/index.aspx?for_cr=india&",
            "nl-NL" : "https://www.netapp.com/search/index.aspx?for_cr=netherlands&",
            "ru-RU" : "https://www.netapp.com/search/index.aspx?for_cr=russia&",
            "sv-SE" : "https://www.netapp.com/search/index.aspx?for_cr=sweden&",
            "it-IT" : "https://www.netapp.com/search/index.aspx?for_cr=italy&",
            "he-IL" : "https://www.netapp.com/search/index.aspx?for_cr=israel&",
            "ko-KR" : "https://www.netapp.com/search/index.aspx?for_cr=korea&",
            "zh-TW" : "https://www.netapp.com/search/index.aspx?for_cr=taiwan&",
            "en-GB" : "https://www.netapp.com/search/index.aspx?for_cr=unitedkingdom&",
            "en-SG" : "https://www.netapp.com/search/index.aspx?for_cr=asean&",
            "en-AU" : "https://www.netapp.com/search/index.aspx?for_cr=australia&",
            "pt-BR" : "https://www.netapp.com/search/index.aspx?for_cr=brasil&",
            "de-CH" : "https://www.netapp.com/search/index.aspx?for_cr=switzerland&",
            "es-MX" : "https://www.netapp.com/search/index.aspx?for_cr=mexico&"
        };

        if($('html').hasClass('ntap-whitelisted') && localizationsDictionary.hasOwnProperty(currentLocalization)) {
            $('.n-property-bar__property-link').attr('href', '/');
        }
    });
  </script>
  <!-- End property bar -->
</header>

        <div class="ie-utility">
  <div class="ie-menu">
    <div class="n-breadcrumb">
      <ul class="n-breadcrumb__list">
        <li class="n-breadcrumb__list-item">
          <a href="https://www.netapp.com">Home</a>
        </li>
        <li class="n-breadcrumb__list-item">
          <a href="https://docs.netapp.com">Documentation</a>
        </li>
        

        <li class="n-breadcrumb__list-item">
          <a href="/us-en/ontap-metrocluster/">ONTAP&nbsp;MetroCluster</a>
        </li>
        <li class="n-breadcrumb__list-item">
          Preparing for the MetroCluster installation
        </li>
      </ul>
    </div>

    <div style="clear: both"></div><!-- Main needs to have height -->
  </div>
</div>


        <main id="n-main-content" class="n-main-content">
          <!-- Start Documentation Content -->
<div class="ie-main">
  <!-- Sidebar Column -->
  
  <div class="col-md-3" >
      <div class="n-pdf-header">
  <a id="toggleButtonPdf" class="n-pdf-button" type="button">PDFs<span>
    </span>
  </a>
</div>
<ul id="toggleContainerPdf" class="n-pdf-body" style="display:none;"><div class="n-pdf-section">
      <span class="n-pdf-section-title">Site</span>
    </div>
    <li>
      <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/fullsite-sidebar/MetroCluster_Documentation.pdf" >
        <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
        MetroCluster Documentation
      </a>
    </li>





    
      <span class="subfolders" style="display:none;">
        
          <div class="n-pdf-section">
            <span class="n-pdf-section-title">
              Sections
            </span>
          </div>
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Install_a_fabric_attached_MetroCluster.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Install a fabric-attached MetroCluster
          </a>
        </li>
        <span>
          







    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Cabling_a_fabric_attached_MetroCluster_configuration.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Cabling a fabric-attached MetroCluster configuration
          </a>
        </li>
        <span>
          

    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Parts_of_a_fabric_MetroCluster_configuration.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Parts of a fabric MetroCluster configuration
          </a>
        </li>
        <span>
          










          
        </span>
      </span>
    

  







    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Installing_and_cabling_MetroCluster_components.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Installing and cabling MetroCluster components
          </a>
        </li>
        <span>
          






















          
        </span>
      </span>
    

  



    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Configuring_the_FC_switches.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Configuring the FC switches
          </a>
        </li>
        <span>
          



    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Configuring_Brocade_FC_switches_with_RCF_files.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Configuring Brocade FC switches with RCF files
          </a>
        </li>
        <span>
          







    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Configuring_the_Cisco_FC_switches_with_RCF_files.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Configuring the Cisco FC switches with RCF files
          </a>
        </li>
        <span>
          








          
        </span>
      </span>
    

  




          
        </span>
      </span>
    

  



    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Configuring_the_Cisco_or_Brocade_FC_switches_manually.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Configuring the Cisco or Brocade FC switches manually
          </a>
        </li>
        <span>
          






          
        </span>
      </span>
    

  




          
        </span>
      </span>
    

  






          
        </span>
      </span>
    

  



    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Configuring_hardware_for_sharing_a_Brocade_6510_FC_fabric_during_transition.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Configuring hardware for sharing a Brocade 6510 FC fabric during transition
          </a>
        </li>
        <span>
          







    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Configuring_switch_fabrics_sharing_between_the_7_Mode_and_clustered_MetroCluster_configuration.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Configuring switch fabrics sharing between the 7-Mode and clustered MetroCluster configuration
          </a>
        </li>
        <span>
          










          
        </span>
      </span>
    

  




          
        </span>
      </span>
    

  











    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Planning_and_installing_a_MetroCluster_configuration_with_array_LUNs.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Planning and installing a MetroCluster configuration with array LUNs
          </a>
        </li>
        <span>
          







    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Installing_and_cabling_the_MetroCluster_components_in_a_configuration_with_array_LUNs.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Installing and cabling the MetroCluster components in a configuration with array LUNs
          </a>
        </li>
        <span>
          







    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Cabling_the_FC_VI_and_HBA_ports_in_a_MetroCluster_configuration_with_array_LUNs.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Cabling the FC-VI and HBA ports in a MetroCluster configuration with array LUNs
          </a>
        </li>
        <span>
          








          
        </span>
      </span>
    

  













    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Cabling_storage_arrays_to_FC_switches_in_a_MetroCluster_configuration.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Cabling storage arrays to FC switches in a MetroCluster configuration
          </a>
        </li>
        <span>
          








          
        </span>
      </span>
    

  




          
        </span>
      </span>
    

  



    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Switch_zoning_in_a_MetroCluster_configuration_with_array_LUNs.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Switch zoning in a MetroCluster configuration with array LUNs
          </a>
        </li>
        <span>
          










          
        </span>
      </span>
    

  



    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Setting_up_ONTAP_in_a_MetroCluster_configuration_with_array_LUNs.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Setting up ONTAP in a MetroCluster configuration with array LUNs
          </a>
        </li>
        <span>
          




















          
        </span>
      </span>
    

  



    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Implementing_a_MetroCluster_configuration_with_both_disks_and_array_LUNs.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Implementing a MetroCluster configuration with both disks and array LUNs
          </a>
        </li>
        <span>
          








          
        </span>
      </span>
    

  




          
        </span>
      </span>
    

  



    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Using_the_Active_IQ_Unified_Manager_and_ONTAP_System_Manager_for_further_configuration_and_monitoring.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Using the Active IQ Unified Manager and ONTAP System Manager for further configuration and monitoring
          </a>
        </li>
        <span>
          




          
        </span>
      </span>
    

  








          
        </span>
      </span>
    

  



    
      <span class="subfolders" style="display:none;">
        
          <div class="n-pdf-section">
            <span class="n-pdf-section-title">
              Sections
            </span>
          </div>
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Install_a_MetroCluster_IP_configuration.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Install a MetroCluster IP configuration
          </a>
        </li>
        <span>
          


    <div class="n-pdf-section">
  <span class="n-pdf-section-title">This page</span>
</div>

<li class="active">
  <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/pages/install-ip/concept_prepare_for_the_mcc_installation.pdf" >
    <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
    Preparing for the MetroCluster installation
  </a>
</li>


  



    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Configuring_the_MetroCluster_hardware_components.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Configuring the MetroCluster hardware components
          </a>
        </li>
        <span>
          








          
        </span>
      </span>
    

  







    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Configuring_the_ONTAP_Mediator_service_for_unplanned_automatic_switchover.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Configuring the ONTAP Mediator service for unplanned automatic switchover
          </a>
        </li>
        <span>
          
















          
        </span>
      </span>
    

  












          
        </span>
      </span>
    

  



    
      <span class="subfolders" style="display:none;">
        
          <div class="n-pdf-section">
            <span class="n-pdf-section-title">
              Sections
            </span>
          </div>
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Install_a_stretch_MetroCluster_configuration.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Install a stretch MetroCluster configuration
          </a>
        </li>
        <span>
          







    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Cabling_a_two_node_SAS_attached_stretch_MetroCluster_configuration.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Cabling a two-node SAS-attached stretch MetroCluster configuration
          </a>
        </li>
        <span>
          





    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Installing_and_cabling_MetroCluster_components_for_two_node_SAS_attached_stretch_configurations.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Installing and cabling MetroCluster components for two-node SAS-attached stretch configurations
          </a>
        </li>
        <span>
          










          
        </span>
      </span>
    

  




          
        </span>
      </span>
    

  



    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Cabling_a_two_node_bridge_attached_stretch_MetroCluster_configuration.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Cabling a two-node bridge-attached stretch MetroCluster configuration
          </a>
        </li>
        <span>
          







    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Installing_and_cabling_MetroCluster_components.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Installing and cabling MetroCluster components
          </a>
        </li>
        <span>
          










          
        </span>
      </span>
    

  






          
        </span>
      </span>
    

  









    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Connections_in_a_stretch_MetroCluster_configurations_with_array_LUNs.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Connections in a stretch MetroCluster configurations with array LUNs
          </a>
        </li>
        <span>
          








          
        </span>
      </span>
    

  





    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Using_the_Active_IQ_Unified_Manager_and_ONTAP_System_Manager_for_further_configuration_and_monitoring.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Using the Active IQ Unified Manager and ONTAP System Manager for further configuration and monitoring
          </a>
        </li>
        <span>
          




          
        </span>
      </span>
    

  










          
        </span>
      </span>
    

  



    
      <span class="subfolders" style="display:none;">
        
          <div class="n-pdf-section">
            <span class="n-pdf-section-title">
              Sections
            </span>
          </div>
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Maintain_the_MetroCluster_components.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Maintain the MetroCluster components
          </a>
        </li>
        <span>
          







    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Performing_FC_to_SAS_bridge_maintenance.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Performing FC-to-SAS bridge maintenance
          </a>
        </li>
        <span>
          






















          
        </span>
      </span>
    

  



    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Performing_FC_switch_maintenance_and_replacement.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Performing FC switch maintenance and replacement
          </a>
        </li>
        <span>
          






















          
        </span>
      </span>
    

  



    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Performing_IP_switch_maintenance_and_replacement.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Performing IP switch maintenance and replacement
          </a>
        </li>
        <span>
          










          
        </span>
      </span>
    

  







    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Hot_adding_storage_to_a_MetroCluster_FC_configuration.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Hot-adding storage to a MetroCluster FC configuration
          </a>
        </li>
        <span>
          



    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Hot_adding_SAS_storage_to_a_bridge_attached_MetroCluster_FC_configuration.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Hot-adding SAS storage to a bridge-attached MetroCluster FC configuration
          </a>
        </li>
        <span>
          





    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Hot_adding_a_SAS_disk_shelf_to_a_stack_of_SAS_disk_shelves.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Hot-adding a SAS disk shelf to a stack of SAS disk shelves
          </a>
        </li>
        <span>
          






          
        </span>
      </span>
    

  






          
        </span>
      </span>
    

  




          
        </span>
      </span>
    

  























    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Port_assignments_for_FC_switches.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Port assignments for FC switches
          </a>
        </li>
        <span>
          








          
        </span>
      </span>
    

  








          
        </span>
      </span>
    

  





    
      <span class="subfolders" style="display:none;">
        
          <div class="n-pdf-section">
            <span class="n-pdf-section-title">
              Sections
            </span>
          </div>
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Performing_switchover__healing__and_switchback.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Performing switchover, healing, and switchback
          </a>
        </li>
        <span>
          

    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Performing_switchover_for_tests_or_maintenance.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Performing switchover for tests or maintenance
          </a>
        </li>
        <span>
          











    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Healing_the_configuration.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Healing the configuration
          </a>
        </li>
        <span>
          

    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Healing_the_configuration_in_a_MetroCluster_FC_configuration.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Healing the configuration in a MetroCluster FC configuration
          </a>
        </li>
        <span>
          






          
        </span>
      </span>
    

  






          
        </span>
      </span>
    

  








          
        </span>
      </span>
    

  












          
        </span>
      </span>
    

  



    
      <span class="subfolders" style="display:none;">
        
          <div class="n-pdf-section">
            <span class="n-pdf-section-title">
              Sections
            </span>
          </div>
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Install_and_Configure_MetroCluster_Tiebreaker.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Install and Configure MetroCluster Tiebreaker
          </a>
        </li>
        <span>
          




















          
        </span>
      </span>
    

  



    
      <span class="subfolders" style="display:none;">
        
          <div class="n-pdf-section">
            <span class="n-pdf-section-title">
              Sections
            </span>
          </div>
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Transition_from_MetroCluster_FC_to_MetroCluster_IP.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Transition from MetroCluster FC to MetroCluster IP
          </a>
        </li>
        <span>
          



    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Transitioning_nondisruptively_from_a_MetroCluster_FC_to_a_MetroCluster_IP_configuration__ONTAP_9_8_and_later_.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Transitioning nondisruptively from a MetroCluster FC to a MetroCluster IP configuration (ONTAP 9.8 and later)
          </a>
        </li>
        <span>
          

    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Preparing_for_transition_from_a_MetroCluster_FC_to_a_MetroCluster_IP_configuration.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Preparing for transition from a MetroCluster FC to a MetroCluster IP configuration
          </a>
        </li>
        <span>
          
















          
        </span>
      </span>
    

  










          
        </span>
      </span>
    

  



    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Disruptively_transitioning_from_a_two_node_MetroCluster_FC_to_a_four_node_MetroCluster_IP_configuration__ONTAP_9_8_and_later_.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Disruptively transitioning from a two-node MetroCluster FC to a four-node MetroCluster IP configuration (ONTAP 9.8 and later)
          </a>
        </li>
        <span>
          














          
        </span>
      </span>
    

  














          
        </span>
      </span>
    

  



    
      <span class="subfolders" style="display:none;">
        
          <div class="n-pdf-section">
            <span class="n-pdf-section-title">
              Sections
            </span>
          </div>
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Upgrade_or_expand_the_MetroCluster_configuration.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Upgrade or expand the MetroCluster configuration
          </a>
        </li>
        <span>
          











    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Expanding_a_two_node_MetroCluster_FC_configuration_to_a_four_node_configuration.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Expanding a two-node MetroCluster FC configuration to a four-node configuration
          </a>
        </li>
        <span>
          







    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Adding_a_new_controller_module_to_each_cluster.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Adding a new controller module to each cluster
          </a>
        </li>
        <span>
          













    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Installing_and_cabling_the_new_controller_module.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Installing and cabling the new controller module
          </a>
        </li>
        <span>
          






          
        </span>
      </span>
    

  

















    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Configuring_intercluster_LIFs.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Configuring intercluster LIFs
          </a>
        </li>
        <span>
          






          
        </span>
      </span>
    

  












          
        </span>
      </span>
    

  










          
        </span>
      </span>
    

  



    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Expanding_a_four_node_MetroCluster_FC_configuration_to_an_eight_node_configuration.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Expanding a four-node MetroCluster FC configuration to an eight-node configuration
          </a>
        </li>
        <span>
          











    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Recabling_and_zoning_a_switch_fabric_for_the_new_nodes.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Recabling and zoning a switch fabric for the new nodes
          </a>
        </li>
        <span>
          






          
        </span>
      </span>
    

  



    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Configuring_ONTAP_on_the_new_controllers.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Configuring ONTAP on the new controllers
          </a>
        </li>
        <span>
          











    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Configuring_the_clusters_into_a_MetroCluster_configuration.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Configuring the clusters into a MetroCluster configuration
          </a>
        </li>
        <span>
          

    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Configuring_intercluster_LIFs.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Configuring intercluster LIFs
          </a>
        </li>
        <span>
          






          
        </span>
      </span>
    

  
















          
        </span>
      </span>
    

  




          
        </span>
      </span>
    

  










          
        </span>
      </span>
    

  








          
        </span>
      </span>
    

  



    
      <span class="subfolders" style="display:none;">
        
          <div class="n-pdf-section">
            <span class="n-pdf-section-title">
              Sections
            </span>
          </div>
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Disaster_Recovery.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Disaster Recovery
          </a>
        </li>
        <span>
          







    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Recovering_from_a_multi_controller_or_storage_failure.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Recovering from a multi-controller or storage failure
          </a>
        </li>
        <span>
          












          
        </span>
      </span>
    

  






          
        </span>
      </span>
    

  




</ul>

<script>
  $("#toggleContainerPdf li.active").parents('li').toggle('display');
  $("#toggleContainerPdf li.active").parents('span.subfolders').toggle('display');
  $("#toggleButtonPdf").click(function () {
    $("#toggleContainerPdf").toggle('display');
  });
</script><ul id="mysidebar" class="nav"><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/index.html">
        MetroCluster
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/releasenotes.html">
        Release Notes
      </a></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/install-fc/index.html">
        <div class="na-navbar-padding"> Install a fabric-attached MetroCluster</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/concept_deciding_whether_to_use_this_guide_fabric_attached_mcc_installation_and_configuration_guide.html">
        Deciding whether to use the Fabric-attached MetroCluster Installation and Configuration Guide
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/concept_prepare_for_the_mcc_installation.html">
        Preparing for the MetroCluster installation
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/concept_choosing_the_correct_installation_procedure_for_your_configuration_mcc_install.html">
        Choosing the correct installation procedure for your configuration
      </a></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/install-fc/task_configure_the_mcc_hardware_components_fabric.html">
        <div class="na-navbar-padding"> Cabling a fabric-attached MetroCluster configuration</div>
      </a>
      <ul><li class="subfolders "><a href="/us-en/ontap-metrocluster/install-fc/concept_parts_of_a_fabric_mcc_configuration.html">
        <div class="na-navbar-padding"> Parts of a fabric MetroCluster configuration</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/concept_illustration_of_the_local_ha_pairs_in_a_mcc_configuration.html">
        Illustration of the local HA pairs in a MetroCluster configuration
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/concept_illustration_of_redundant_fc_to_sas_bridges.html">
        Illustration of redundant FC-to-SAS bridges
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/concept_redundant_fc_switch_fabrics.html">
        Redundant FC switch fabrics
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/concept_cluster_peering_network_mcc.html">
        Illustration of the cluster peering network
      </a></li></ul></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/concept_required_mcc_components_and_naming_conventions_fabric_mcc.html">
        Required MetroCluster FC components and naming conventions
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/reference_configuration_gathering_worksheet_for_fc_switches_and_fc_to_sas_bridges.html">
        Configuration worksheet for FC switches and FC-to-SAS bridges
      </a></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/install-fc/task_install_and_cable_the_mcc_components.html">
        <div class="na-navbar-padding"> Installing and cabling MetroCluster components</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/task_rack_the_hardware_components_mcc_fabric_and_ip.html">
        Racking the hardware components
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/task_cable_the_controller_module_s_fc_vi_hba_ports_to_the_fc_switches_controller_to_fc_sw.html">
        Cabling the new controller module&#8217;s FC-VI and HBA ports to the FC switches
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/task_cable_the_isl_between_the_mcc_sites_fabric_config.html">
        Cabling the ISLs between MetroCluster sites
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/concept_port_assignments_for_systems_using_two_initiator_ports.html">
        Port assignments for systems using two initiator ports
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/concept_port_assignments_for_fc_switches_when_using_ontap_9_0.html">
        Port assignments for FC switches when using ONTAP 9.0
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/concept_port_assignments_for_fc_switches_when_using_ontap_9_1_and_later.html">
        Port assignments for FC switches when using ONTAP 9.1 and later
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/task_cable_the_cluster_interconnect_in_four_node_configurations.html">
        Cabling the cluster interconnect in eight- or four-node configurations
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/task_cable_the_cluster_peering_connections.html">
        Cabling the cluster peering connections
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/task_cable_the_ha_interconnect.html">
        Cabling the HA interconnect, if necessary
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/task_cable_the_management_and_data_connections.html">
        Cabling the management and data connections
      </a></li></ul></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/install-fc/task_fcsw_configure_the_fc_switches_choice_topic.html">
        <div class="na-navbar-padding"> Configuring the FC switches</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/task_fcsw_configure_the_fc_switches_with_rcf_files_mcc.html">
        Configuring the FC switches by running a configuration file
      </a></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/install-fc/task_fcsw_brocade_configure_the_brocade_fc_switches_with_rcf_files.html">
        <div class="na-navbar-padding"> Configuring Brocade FC switches with RCF files</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/task_reset_the_brocade_fc_switch_to_factory_defaults.html">
        Resetting the Brocade FC switch to factory defaults
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/task_download_the_brocade_fc_rcf_switch_software.html">
        Downloading the Brocade FC switch RCF file
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/task_install_the_brocade_fc_switch_rcf_file.html">
        Installing the Brocade FC switch RCF file
      </a></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/install-fc/generaltask_fcsw_cisco_configure_the_cisco_fc_switches_with_rcf_files.html">
        <div class="na-navbar-padding"> Configuring the Cisco FC switches with RCF files</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/task_reset_the_cisco_fc_switch_to_factory_defaults.html">
        Resetting the Cisco FC switch to factory defaults
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/task_download_and_install_the_cisco_fc_switch_software.html">
        Downloading and installing the Cisco FC switch NX-OS software
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/task_download_and_install_the_cisco_fc_switch_rcf_files.html">
        Downloading and installing the Cisco FC RCF files
      </a></li></ul></li></ul></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/install-fc/task_fcsw_configure_the_cisco_or_brocade_fc_switches_manually.html">
        <div class="na-navbar-padding"> Configuring the Cisco or Brocade FC switches manually</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/task_fcsw_brocade_configure_the_brocade_fc_switches_supertask.html">
        Configuring the Brocade FC switches
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/task_fcsw_cisco_configure_a_cisco_switch_supertask.html">
        Configuring the Cisco FC switches
      </a></li></ul></li></ul></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/task_fb_new_install.html">
        Installing FC-to-SAS bridges and SAS disk shelves
      </a></li></ul></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/install-fc/task_fmc_mcc_transition_configure_the_mcc_hardware_for_share_a_7_mode_brocade_6510_fc_fabric_dure_transition.html">
        <div class="na-navbar-padding"> Configuring hardware for sharing a Brocade 6510 FC fabric during transition</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/concept_fcsw_brocade_reviewing_brocade_license_requirements.html">
        Reviewing Brocade license requirements
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/task_rack_the_hardware_components_mcc_fabric_and_ip.html">
        Racking the hardware components
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/task_fmc_mcc_transition_cable_the_new_mcc_controllers_to_the_exist_fc_fabrics.html">
        Cabling the new MetroCluster controllers to the existing FC fabrics
      </a></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/install-fc/task_fmc_mcc_transition_configure_a_switch_fabric_for_shar_with_the_7_mode_and_clustered_mcc_configuration.html">
        <div class="na-navbar-padding"> Configuring switch fabrics sharing between the 7-Mode and clustered MetroCluster configuration</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/task_fmc_mcc_transition_disable_one_of_the_switch_fabrics.html">
        Disabling one of the switch fabrics
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/task_fmc_mcc_transition_configure_zone_and_qos.html">
        Deleting TI zoning and configuring IOD settings
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/task_fmc_mcc_transition_ensure_isls_are_in_the_same_port_group_and_configure_zon.html">
        Ensuring ISLs are in the same port group and configuring zoning
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/task_fmc_mcc_transition_reenable_the_switch_fabric_and_verify_operation.html">
        Reenabling the switch fabric and verify operation
      </a></li></ul></li></ul></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/concept_configure_the_mcc_software_in_ontap.html">
        Configuring the MetroCluster software in ONTAP
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/concept_considerations_for_using_virtual_ip_and_border_gateway_protocol_with_a_mcc_configuration.html">
        Considerations for using virtual IP and Border Gateway Protocol with a MetroCluster configuration
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/task_test_the_mcc_configuration.html">
        Testing the MetroCluster configuration
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/concept_considerations_when_removing_mcc_configurations.html">
        Considerations when removing MetroCluster configurations
      </a></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/install-fc/concept_planning_and_installing_a_mcc_configuration_with_array_luns.html">
        <div class="na-navbar-padding"> Planning and installing a MetroCluster configuration with array LUNs</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/concept_planning_for_a_mcc_configuration_with_array_luns.html">
        Planning for a MetroCluster configuration with array LUNs
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/reference_supported_mcc_configuration_with_array_luns.html">
        Supported MetroCluster configuration with array LUNs
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/reference_requirements_for_a_mcc_configuration_with_array_luns_reference.html">
        Requirements for a MetroCluster configuration with array LUNs
      </a></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/install-fc/task_install_and_cable_the_mcc_components_in_a_configuration_with_array_luns.html">
        <div class="na-navbar-padding"> Installing and cabling the MetroCluster components in a configuration with array LUNs</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/task_rack_the_hardware_components_in_a_mcc_configuration_with_array_luns.html">
        Racking the hardware components in a MetroCluster configuration with array LUNs
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/task_prepare_a_storage_array_for_use_with_ontap_systems.html">
        Preparing a storage array for use with ONTAP systems
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/concept_switch_ports_required_for_a_eight_node_mcc_configuration_with_array_luns.html">
        Switch ports required for a MetroCluster configuration with array LUNs
      </a></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/install-fc/task_cable_the_fc_vi_and_hba_ports_in_a_mcc_configuration_with_array_luns.html">
        <div class="na-navbar-padding"> Cabling the FC-VI and HBA ports in a MetroCluster configuration with array LUNs</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/task_cable_the_fc_vi_and_hba_ports_to_switches_in_a_two_node_fabric_attached_mcc_configuration_with_array_luns.html">
        Cabling the FC-VI and HBA ports in a two-node fabric-attached MetroCluster configuration with array LUNs
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/task_cable_the_fc_vi_and_hba_ports_to_switches_in_a_four_node_fabric_attached_mcc_configuration_with_array_luns.html">
        Cabling the FC-VI and HBA ports in a four-node fabric-attached MetroCluster configuration with array LUNs
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/task_cable_the_fc_vi_and_hba_ports_to_switches_in_an_eight_node_fabric_attached_mcc_configuration_with_array_luns.html">
        Cabling the FC-VI and HBA ports in an eight-node fabric-attached MetroCluster configuration with array LUNs
      </a></li></ul></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/task_cable_the_isls_in_a_mcc_configuration_with_array_luns.html">
        Cabling the ISLs in a MetroCluster configuration with array LUNs
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/task_cable_the_cluster_interconnect_in_four_node_configurations.html">
        Cabling the cluster interconnect in eight- or four-node configurations
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/task_cable_the_cluster_peering_connections.html">
        Cabling the cluster peering connections
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/task_cable_the_ha_interconnect.html">
        Cabling the HA interconnect, if necessary
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/task_cable_the_management_and_data_connections.html">
        Cabling the management and data connections
      </a></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/install-fc/task_cable_storage_arrays_to_fc_switches_in_a_mcc_configuration.html">
        <div class="na-navbar-padding"> Cabling storage arrays to FC switches in a MetroCluster configuration</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/reference_example_of_cabling_array_luns_to_fc_switches_in_a_two_node_mcc_configuration.html">
        Example of cabling storage array ports to FC switches in a two-node MetroCluster configuration
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/reference_example_of_cabling_array_luns_to_fc_switches_in_a_four_node_mcc_configuration.html">
        Example of cabling storage array ports to FC switches in a four-node MetroCluster configuration
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/reference_example_of_cabling_array_luns_to_fc_switches_in_an_eight_node_mcc_configuration.html">
        Example of cabling storage array ports to FC switches in an eight-node MetroCluster configuration
      </a></li></ul></li></ul></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/install-fc/concept_switch_zoning_in_a_mcc_configuration_with_array_luns.html">
        <div class="na-navbar-padding"> Switch zoning in a MetroCluster configuration with array LUNs</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/reference_requirements_for_switch_zoning_in_a_mcc_configuration_with_array_luns.html">
        Requirements for switch zoning in a MetroCluster configuration with array LUNs
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/concept_example_of_switch_zoning_in_a_two_node_mcc_configuration_with_array_luns.html">
        Example of switch zoning in a two-node MetroCluster configuration with array LUNs
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/concept_example_of_switch_zoning_in_a_four_node_mcc_configuration_with_array_luns.html">
        Example of switch zoning in a four-node MetroCluster configuration with array LUNs
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/concept_example_of_switch_zoning_in_an_eight_node_mcc_configuration_with_array_luns.html">
        Example of switch zoning in an eight-node MetroCluster configuration with array LUNs
      </a></li></ul></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/install-fc/task_configure_ontap_in_a_mcc_configuration_with_array_luns.html">
        <div class="na-navbar-padding"> Setting up ONTAP in a MetroCluster configuration with array LUNs</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/task_verify_the_ha_state_of_components_is_mcc_or_mcc_2n_in_maintenance_mode.html">
        Verifying and configuring the HA state of components in Maintenance mode
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/task_configure_ontap_on_a_system_that_uses_only_array_luns.html">
        Configuring ONTAP on a system that uses only array LUNs
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/concept_setting_up_the_cluster.html">
        Setting up the cluster
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/task_install_the_license_for_us_array_luns_in_a_mcc_configuration.html">
        Installing the license for using array LUNs in a MetroCluster configuration
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/task_configure_fc_vi_ports_on_a_x1132a_r6_quad_port_card.html">
        Configuring FC-VI ports on a X1132A-R6 quad-port card on FAS8020 systems
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/task_assign_ownership_of_array_luns.html">
        Assigning ownership of array LUNs
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/task_peer_the_clusters_mcc_with_array_luns.html">
        Peering the clusters
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/task_mirror_the_root_aggregates_mcc_with_array_luns.html">
        Mirroring the root aggregates
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/task_create_data_aggregates_and_implement_the_configuration_mcc_with_array_luns.html">
        Creating data aggregates on, implementing, and verifying the MetroCluster configuration
      </a></li></ul></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/install-fc/concept_implementing_a_mcc_configuration_with_both_disks_and_array_luns.html">
        <div class="na-navbar-padding"> Implementing a MetroCluster configuration with both disks and array LUNs</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/concept_considerations_for_implementing_a_mcc_configuration_with_disks_and_array_luns.html">
        Considerations when implementing a MetroCluster configuration with disks and array LUNs
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/reference_example_of_a_two_node_fabric_attached_mcc_configuration_with_disks_and_array_luns.html">
        Example of a two-node fabric-attached MetroCluster configuration with disks and array LUNs
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/concept_example_of_a_four_node_mcc_configuration_with_disks_and_array_luns.html">
        Example of a four-node MetroCluster configuration with disks and array LUNs
      </a></li></ul></li></ul></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/install-fc/concept_using_the_oncommand_management_tools_for_further_configuration_and_monitoring.html">
        <div class="na-navbar-padding"> Using the Active IQ Unified Manager and ONTAP System Manager for further configuration and monitoring</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/task_synchronize_the_system_time_us_ntp.html">
        Synchronizing the system time using NTP
      </a></li></ul></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/concept_considerations_when_using_ontap_in_a_mcc_configuration.html">
        Considerations when using ONTAP in a MetroCluster configuration
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/reference_where_to_find_additional_information_icg.html">
        Where to find additional information
      </a></li></ul></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/install-ip/index.html">
        <div class="na-navbar-padding"> Install a MetroCluster IP configuration</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-ip/concept_deciding_whether_to_use_this_guide_mcc_ip_installation_and_configuration_guide.html">
        Deciding whether to use the MetroCluster IP Installation and Configuration Guide
      </a></li><li class="  active "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-ip/concept_prepare_for_the_mcc_installation.html">
        Preparing for the MetroCluster installation
      </a></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/install-ip/task_configure_the_mcc_hardware_components_mcc_ip.html">
        <div class="na-navbar-padding"> Configuring the MetroCluster hardware components</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-ip/concept_parts_of_an_ip_mcc_configuration_mcc_ip.html">
        Parts of a MetroCluster IP configuration
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-ip/concept_required_mcc_ip_components_and_naming_guidelines_mcc_ip.html">
        Required MetroCluster IP components and naming conventions
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-ip/task_install_and_cable_the_mcc_components.html">
        Installing and cabling MetroCluster components
      </a></li></ul></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-ip/concept_configure_the_mcc_software_in_ontap.html">
        Configuring the MetroCluster software in ONTAP
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-ip/concept_considerations_for_using_virtual_ip_and_border_gateway_protocol_with_a_mcc_configuration.html">
        Considerations for using virtual IP and Border Gateway Protocol with a MetroCluster configuration
      </a></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/install-ip/concept_configure_the_ontap_mediator_for_unplanned_automatic_switchover.html">
        <div class="na-navbar-padding"> Configuring the ONTAP Mediator service for unplanned automatic switchover</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-ip/concept_mediator_requirements.html">
        Preparing to install the ONTAP Mediator service
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-ip/task_install_configure_mediator.html">
        Installing or upgrading the ONTAP Mediator service
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-ip/task_configuring_the_ontap_mediator_service_from_a_metrocluster_ip_configuration.html">
        Configuring the ONTAP Mediator service from a MetroCluster IP configuration
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-ip/task_connecting_mcc_to_different_mediator_instance.html">
        Connecting a MetroCluster configuration to a different ONTAP Mediator instance
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-ip/task_changing_mediator_password.html">
        Changing the ONTAP Mediator password
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-ip/task_changing_mediator_username.html">
        Changing the ONTAP Mediator user name
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-ip/task_uninstall_mediator.html">
        Uninstalling the ONTAP Mediator service
      </a></li></ul></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-ip/task_test_the_mcc_configuration.html">
        Testing the MetroCluster configuration
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-ip/concept_considerations_when_removing_mcc_configurations.html">
        Considerations when removing MetroCluster configurations
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-ip/concept_considerations_when_using_ontap_in_a_mcc_configuration.html">
        Considerations when using ONTAP in a MetroCluster configuration
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-ip/reference_where_to_find_additional_information_mccip_icg.html">
        Where to find additional information
      </a></li></ul></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/install-stretch/index.html">
        <div class="na-navbar-padding"> Install a stretch MetroCluster configuration</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-stretch/concept_deciding_whether_to_use_this_guide_stretch_mcc_installation_and_configuration_guide.html">
        Deciding whether to use the Stretch MetroCluster Installation and Configuration Guide
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-stretch/concept_preparing_for_the_mcc_installation.html">
        Preparing for the MetroCluster installation
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-stretch/concept_choosing_the_correct_installation_procedure_for_your_configuration_mcc_install.html">
        Choosing the correct installation procedure for your configuration
      </a></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/install-stretch/task_configure_the_mcc_hardware_components_2_node_stretch_sas.html">
        <div class="na-navbar-padding"> Cabling a two-node SAS-attached stretch MetroCluster configuration</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-stretch/concept_parts_of_a_two_node_sas_attached_stretch_mcc_configuration.html">
        Parts of a two-node SAS-attached stretch MetroCluster configuration
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-stretch/concept_required_mcc_components_and_example_names_for_two_node_sas_attached_stretch_configurations_mcc.html">
        Required MetroCluster hardware components and naming guidelines for two-node SAS-attached stretch configurations
      </a></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/install-stretch/reference_sas_optical_mc_configuring_a_stretch_mcc_system_with_sas_disk_shelves_and_sas_optical_cables.html">
        <div class="na-navbar-padding"> Installing and cabling MetroCluster components for two-node SAS-attached stretch configurations</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-stretch/task_rack_the_hardware_components_2_node_stretch_sas.html">
        Racking the hardware components
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-stretch/task_cable_the_controllers_to_each_other_and_the_storage_shelves.html">
        Cabling the controllers to each other and the storage shelves
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-stretch/task_cable_the_cluster_peering_connections.html">
        Cabling the cluster peering connections
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-stretch/task_cable_the_management_and_data_connections.html">
        Cabling the management and data connections
      </a></li></ul></li></ul></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/install-stretch/task_configure_the_mcc_hardware_components_2_node_stretch_atto.html">
        <div class="na-navbar-padding"> Cabling a two-node bridge-attached stretch MetroCluster configuration</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-stretch/concept_parts_of_a_two_node_mcc_configuration_using_fc_to_sas_bridges.html">
        Parts of a two-node bridge-attached stretch MetroCluster configuration
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-stretch/concept_required_mcc_components_and_naming_conventions_for_two_node_bridge_attached_stretch_configurations_mcc.html">
        Required MetroCluster hardware components and naming conventions for two-node bridge-attached stretch configurations
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-stretch/reference_information_gathering_worksheet_for_fc_to_sas_bridges_2_node_atto.html">
        Information gathering worksheet for FC-to-SAS bridges
      </a></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/install-stretch/task_install_and_cable_the_mcc_components.html">
        <div class="na-navbar-padding"> Installing and cabling MetroCluster components</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-stretch/task_rack_the_hardware_components_mcc_2_node_stretch_atto.html">
        Racking the hardware components
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-stretch/task_cable_the_fc_vi_adapters_to_the_partner_controller_2_node_stretch_atto.html">
        Cabling the controllers to each other
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-stretch/task_cable_the_cluster_peering_connections.html">
        Cabling the cluster peering connections
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-stretch/task_cable_the_management_and_data_connections.html">
        Cabling the management and data connections
      </a></li></ul></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-stretch/task_fb_new_install.html">
        Installing FC-to-SAS bridges and SAS disk shelves
      </a></li></ul></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-stretch/concept_configuring_the_mcc_software_in_ontap.html">
        Configuring the MetroCluster software in ONTAP
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-stretch/concept_considerations_for_using_virtual_ip_and_border_gateway_protocol_with_a_mcc_configuration.html">
        Considerations for using virtual IP and Border Gateway Protocol with a MetroCluster configuration
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-stretch/task_test_the_mcc_configuration.html">
        Testing the MetroCluster configuration
      </a></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/install-stretch/concept_stretch_mcc_configuration_with_array_luns.html">
        <div class="na-navbar-padding"> Connections in a stretch MetroCluster configurations with array LUNs</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-stretch/reference_example_of_a_stretch_mcc_configuration_with_array_luns.html">
        Example of a stretch MetroCluster configuration with array LUNs
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-stretch/reference_examples_of_two_node_stretch_mcc_configurations_with_disks_and_array_luns.html">
        Examples of two-node stretch MetroCluster configurations with disks and array LUNs
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-stretch/reference_example_of_a_stretch_mcc_configuration_with_e_series_storage_arrays.html">
        Example of a stretch MetroCluster configuration with E-Series storage arrays
      </a></li></ul></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-stretch/concept_considerations_when_removing_mcc_configurations.html">
        Considerations when removing MetroCluster configurations
      </a></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/install-stretch/concept_using_the_oncommand_management_tools_for_further_configuration_and_monitoring.html">
        <div class="na-navbar-padding"> Using the Active IQ Unified Manager and ONTAP System Manager for further configuration and monitoring</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-stretch/task_synchronize_the_system_time_us_ntp.html">
        Synchronizing the system time using NTP
      </a></li></ul></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-stretch/concept_considerations_when_using_ontap_in_a_mcc_configuration.html">
        Considerations when using ONTAP in a MetroCluster configuration
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-stretch/task_upgrade_the_configuration_to_fabric_attached_mcc.html">
        Transitioning from a stretch to a fabric-attached MetroCluster configuration
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-stretch/reference_where_to_find_additional_information_icg.html">
        Where to find additional information
      </a></li></ul></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/maintain/index.html">
        <div class="na-navbar-padding"> Maintain the MetroCluster components</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/concept_deciding_whether_to_use_this_guide_mcc_service_guide.html">
        Deciding whether to use the MetroCluster Maintenance Guide
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/concept_where_to_find_procedures_for_mcc_maintenance_tasks.html">
        Where to find procedures for MetroCluster maintenance tasks
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/reference_mcc_failure_scenarios.html">
        MetroCluster failure and recovery scenarios
      </a></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/maintain/concept_performing_fc_to_sas_bridge_maintenance.html">
        <div class="na-navbar-padding"> Performing FC-to-SAS bridge maintenance</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/concept_using_fibrebridge_7600n_bridges_in_mcc_configurations.html">
        Support for FibreBridge 7600N bridges in MetroCluster configurations
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/concept_using_fibrebridge_7500n_bridges_in_mcc_configurations.html">
        Support for FibreBridge 7500N bridges in MetroCluster configurations
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/task_enable_ip_port_access_on_the_fibrebridge_7600n_bridge_guides.html">
        Enabling IP port access on the FibreBridge 7600N bridge if necessary
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/task_update_firmware_on_a_fibrebridge_bridge_parent_topic.html">
        Updating firmware on a FibreBridge bridge
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/task_replace_a_sle_fc_to_sas_bridge.html">
        Replacing a single FC-to-SAS bridge
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/task_fb_consolidate_replace_a_pair_of_fibrebridge_6500n_bridges_with_7500n_bridges.html">
        Replacing a pair of FibreBridge 6500N bridges with 7600N or 7500N bridges
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/reference_requirements_for_using_other_interfaces_to_configure_and_manage_fibrebridge_bridges.html">
        Requirements for using other interfaces to configure and manage FibreBridge bridges
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/reference_fb_replace_a_power_supply.html">
        Hot-replacing a failed power supply module
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/concept_in_band_management_of_the_fc_to_sas_bridges.html">
        In-band management of the FC-to-SAS bridges
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/task_secur_or_unsecur_a_fibrebridge_bridge.html">
        Securing or unsecuring the FibreBridge bridge
      </a></li></ul></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/maintain/concept_performing_fc_switch_maintenance.html">
        <div class="na-navbar-padding"> Performing FC switch maintenance and replacement</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/task_upgrade_or_downgrad_the_firmware_on_a_brocade_fc_switch_mcc.html">
        Upgrading or downgrading the firmware on a Brocade FC switch
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/task_upgrade_or_downgrad_the_firmware_on_a_cisco_fc_switch_mcc.html">
        Upgrading or downgrading the firmware on a Cisco FC switch
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/task_upgrade_to_new_brocade_switches.html">
        Upgrading to new Brocade FC switches
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/task_replace_a_brocade_fc_switch_mcc.html">
        Replacing a Brocade FC switch
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/task_rename_a_brocade_fc_switch.html">
        Renaming a Brocade FC switch
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/task_disable_encryption_on_brocade_fc_switches.html">
        Disabling encryption on Brocade FC switches
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/task_change_isl_properties_isl_ports_or_the_iod_ood_configuration_on_a_brocade_switch.html">
        Changing ISL properties, ISL ports, or the IOD/OOD configuration on a Brocade switch
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/task_replace_a_cisco_fc_switch_mcc.html">
        Replacing a Cisco FC switch
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/task_change_speed_of_isl_ports_on_a_cisco_fc_switch.html">
        Changing speed of ISL ports on a Cisco FC switch
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/task_add_lsls_to_a_cisco_fc_switch.html">
        Adding lSLs to a Cisco switch
      </a></li></ul></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/maintain/concept_performing_ip_switch_maintenance.html">
        <div class="na-navbar-padding"> Performing IP switch maintenance and replacement</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/task_replace_an_ip_switch.html">
        Replacing an IP switch
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/task_upgrade_firmware_on_mcc_ip_switches.html">
        Upgrading firmware on MetroCluster IP switches
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/task_upgrade_rcf_files_on_mcc_ip_switches.html">
        Upgrading RCF files on MetroCluster IP switches
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/task_rename_a_cisco_ip_switch.html">
        Renaming a Cisco IP switch
      </a></li></ul></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/task_add_remove_or_change_isl_ports_nondisruptively.html">
        Adding, removing, or changing ISL ports nondisruptively
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/concept_identifying_storage_in_a_mcc_ip_configuration.html">
        Identifying storage in a MetroCluster IP configuration
      </a></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/maintain/task_hot_add_storage_to_a_mcc_fc_configuration_container_topic.html">
        <div class="na-navbar-padding"> Hot-adding storage to a MetroCluster FC configuration</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/task_hot_add_a_sas_disk_shelf_in_a_direct_attached_mcc_configuration_us_sas_optical_cables.html">
        Hot-adding a SAS disk shelf in a direct-attached MetroCluster FC configuration using SAS optical cables
      </a></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/maintain/concept_atto_mc_hot_adding_storage_shelves_to_a_bridge_attached_mcc_configuration.html">
        <div class="na-navbar-padding"> Hot-adding SAS storage to a bridge-attached MetroCluster FC configuration</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/task_hot_add_a_stack_to_exist_7500n_pair.html">
        Hot-adding a stack of SAS disk shelves to an existing pair of FibreBridge 7500N bridges
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/task_fb_hot_add_stack_of_shelves_and_bridges.html">
        Hot-adding a stack of SAS disk shelves and bridges to a MetroCluster system
      </a></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/maintain/task_fb_hot_add_shelf.html">
        <div class="na-navbar-padding"> Hot-adding a SAS disk shelf to a stack of SAS disk shelves</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/task_fb_hot_add_shelf_prepare_7500n.html">
        Preparing to hot-add SAS disk shelves
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/task_fb_hot_add_a_disk_shelf_install_7500n.html">
        Hot-adding a disk shelf
      </a></li></ul></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/task_hot_add_an_iom12_disk_shelf_to_a_stack_of_iom6_disk_shelves.html">
        Hot-adding an IOM12 disk shelf to a stack of IOM6 disk shelves in a bridge-attached MetroCluster configuration
      </a></li></ul></li></ul></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/task_hot_remove_storage_from_a_mcc_fc_configuration.html">
        Hot-removing storage from a MetroCluster FC configuration
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/task_replace_a_shelf_nondisruptively_in_a_stretch_mcc_configuration.html">
        Replacing a shelf nondisruptively in a stretch MetroCluster configuration
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/task_replace_a_shelf_nondisruptively_in_a_mcc_fc_configuration.html">
        Replacing a shelf nondisruptively in a fabric-attached MetroCluster configuration
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/concept_migrating_root_volumes_to_a_new_destination.html">
        When to migrate root volumes to a new destination
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/task_move_a_metadata_volume_in_mcc_configurations.html">
        Moving a metadata volume in MetroCluster configurations
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/task_rename_the_cluster_for_mcc_configuration.html">
        Renaming a cluster in MetroCluster configurations
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/task_power_on_and_power_off_a_data_center.html">
        Powering off and powering on a data center
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/task_power_off_an_entire_mcc_ip_configuration.html">
        Powering off an entire MetroCluster IP configuration
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/task_power_off_an_entire_mcc_fc_configuration.html">
        Powering off an entire MetroCluster FC configuration
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/task_do_not_use_for_9_8_and_later_reconfigure_the_fc_switch_layout_for_ontap_9_1_or_later.html">
        Reconfiguring an FC switch layout configured before ONTAP 9.x
      </a></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/maintain/concept_port_assignments_for_fc_switches_parent_topic.html">
        <div class="na-navbar-padding"> Port assignments for FC switches</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/concept_port_assignments_for_systems_using_two_initiator_ports.html">
        Port assignments for systems using two initiator ports
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/concept_port_assignments_for_fc_switches_when_using_ontap_9_0.html">
        Port assignments for FC switches when using ONTAP 9.0
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/concept_port_assignments_for_fc_switches_when_using_ontap_9_1_and_later.html">
        Port assignments for FC switches when using ONTAP 9.1 and later
      </a></li></ul></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/concept_using_the_interoperability_matrix_tool_to_find_mcc_information.html">
        Using the Interoperability Matrix Tool to find MetroCluster information
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/reference_where_to_find_additional_information_mcc_service_guide.html">
        Where to find additional information
      </a></li></ul></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/manage/concept_understanding_mcc_data_protection_and_disaster_recovery.html">
        Understanding MetroCluster data protection and disaster recovery
      </a></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/manage/index.html">
        <div class="na-navbar-padding"> Performing switchover, healing, and switchback</div>
      </a>
      <ul><li class="subfolders "><a href="/us-en/ontap-metrocluster/manage/task_perform_switchover_for_tests_or_maintenance.html">
        <div class="na-navbar-padding"> Performing switchover for tests or maintenance</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/manage/task_verifiy_that_your_system_is_ready_for_a_switchover.html">
        Verifying that your system is ready for a switchover
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/manage/task_send_a_custom_autosupport_message_prior_to_negotiated_switchover.html">
        Sending a custom AutoSupport message prior to negotiated switchover
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/manage/task_perform_a_negotiated_switchover.html">
        Performing a negotiated switchover
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/manage/concept_output_for_storage_aggregate_plex_show_after_a_mcc_switchover.html">
        Output for the storage aggregate plex show command is indeterminate after a MetroCluster switchover
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/manage/task_confirm_that_dr_partners_have_come_online.html">
        Confirming that the DR partners have come online
      </a></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/manage/task_heal_the_configuration_choice_task.html">
        <div class="na-navbar-padding"> Healing the configuration</div>
      </a>
      <ul><li class="subfolders "><a href="/us-en/ontap-metrocluster/manage/task_heal_the_configuration_in_a_mcc_fc_configuration_supertask.html">
        <div class="na-navbar-padding"> Healing the configuration in a MetroCluster FC configuration</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/manage/task_heal_the_data_aggregates_after_negotiated_switchover.html">
        Healing the data aggregates after negotiated switchover
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/manage/task_heal_the_root_aggregates_after_negotiated_switchover.html">
        Healing the root aggregates after negotiated switchover
      </a></li></ul></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/manage/task_heal_the_configuration_in_a_mcc_ip_configuration_ontap_9_4_and_earlier.html">
        Healing the configuration in a MetroCluster IP configuration (ONTAP 9.4 and earlier)
      </a></li></ul></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/manage/task_perform_a_switchback.html">
        Performing a switchback
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/manage/task_verify_a_successful_switchback.html">
        Verifying a successful switchback
      </a></li></ul></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/manage/reference_commands_for_switchover_healing_and_switchback.html">
        Commands for switchover, healing, and switchback
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/manage/concept_monitoring_the_mcc_configuration.html">
        Monitoring the MetroCluster configuration
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/manage/concept_monitoring_and_protecting_database_validity_by_using_nvfail.html">
        Monitoring and protecting the file system consistency using NVFAIL
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/manage/reference_where_to_find_additional_information_dr_guide.html">
        Where to find additional information
      </a></li></ul></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/tiebreaker/index.html">
        <div class="na-navbar-padding"> Install and Configure MetroCluster Tiebreaker</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/tiebreaker/concept_deciding_whether_to_use_this_guide_mcc_tiebreaker_installation_and_configuration_guide.html">
        Deciding whether to use the MetroCluster Tiebreaker Software Installation and Configuration Guide
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/tiebreaker/concept_overview_of_the_tiebreaker_software.html">
        Overview of the Tiebreaker software
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/tiebreaker/task_install_the_tiebreaker_software.html">
        Installing the Tiebreaker software
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/tiebreaker/concept_configuring_the_tiebreaker_software.html">
        Configuring the Tiebreaker software
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/tiebreaker/task_configure_snmp_setts_for_tiebreaker_software.html">
        Configuring SNMP settings for Tiebreaker software
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/tiebreaker/concept_monitoring_the_mcc_configuration.html">
        Monitoring the MetroCluster configuration
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/tiebreaker/concept_risks_and_limitation_of_using_mcc_tiebreaker_in_active_mode.html">
        Risks and limitations of using MetroCluster Tiebreaker in active mode
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/tiebreaker/reference_firewall_requirements_for_mcc_tiebreaker.html">
        Firewall requirements for MetroCluster Tiebreaker
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/tiebreaker/reference_where_to_find_additional_information_tb_icg.html">
        Where to find additional information
      </a></li></ul></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/transition/index.html">
        <div class="na-navbar-padding"> Transition from MetroCluster FC to MetroCluster IP</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/transition/concept_supported_platforms_for_transition.html">
        Supported platforms for nondisruptive transition
      </a></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/transition/concept_nondisruptively_transitioning_from_a_four_node_mcc_fc_to_a_mcc_ip_configuration.html">
        <div class="na-navbar-padding"> Transitioning nondisruptively from a MetroCluster FC to a MetroCluster IP configuration (ONTAP 9.8 and later)</div>
      </a>
      <ul><li class="subfolders "><a href="/us-en/ontap-metrocluster/transition/concept_preparing_for_transitioning_from_mcc_fc_to_an_mcc_ip_configuration.html">
        <div class="na-navbar-padding"> Preparing for transition from a MetroCluster FC to a MetroCluster IP configuration</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/transition/concept_requirements_for_fc_to_ip_transition_mcc.html">
        Requirements for nondisruptive FC-to-IP transition
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/transition/concept_how_transition_impacts_the_mcc_hardware_components.html">
        How transition impacts the MetroCluster hardware components
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/transition/concept_transition_workflow_fc_to_ip_transition.html">
        Workflow for nondisruptive MetroCluster transition
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/transition/concept_considerations_for_using_existing_ip_switches.html">
        Considerations for IP switches
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/transition/concept_switchover_and_switchback_operations_during_transition.html">
        Switchover, healing, and switchback operations during nondisruptive transition
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/transition/concept_mcc_operation_during_transition.html">
        Alert messages and tool support during transition
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/transition/concept_example_naming_in_this_procedure_mcc_ip_transition.html">
        Example naming in this procedure
      </a></li></ul></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/transition/task_transition_from_mcc_fc_to_mcc_ip_configurations.html">
        Transitioning from MetroCluster FC to MetroCluster IP configurations
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/transition/task_send_a_custom_autosupport_message_after_maintenance_4n_nondisruptive_mcc_transition.html">
        Sending a custom AutoSupport message after maintenance
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/transition/task_restore_tiebreaker_monitor_4n_nondisruptive_mcc_transition.html">
        Restoring Tiebreaker or Mediator monitoring
      </a></li></ul></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/transition/task_disruptively_transition_from_a_two_node_mcc_fc_to_a_four_node_mcc_ip_configuration.html">
        <div class="na-navbar-padding"> Disruptively transitioning from a two-node MetroCluster FC to a four-node MetroCluster IP configuration (ONTAP 9.8 and later)</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/transition/concept_example_naming_in_this_procedure_2n_mcc_transition_disruptive.html">
        Example naming in this procedure
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/transition/concept_requirements_for_fc_to_ip_transition_2n_mcc_transition.html">
        Preparing for disruptive FC-to-IP transition
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/transition/task_transition_the_mcc_fc_nodes_2n_mcc_transition_supertask.html">
        Transitioning the MetroCluster FC nodes
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/transition/task_connect_the_mcc_ip_controller_modules_2n_mcc_transition_supertask.html">
        Connecting the MetroCluster IP controller modules
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/transition/task_configure_the_new_nodes_and_complete_transition.html">
        Configuring the new nodes and completing transition
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/transition/task_return_the_system_to_normal_operation_2n_mcc_transition_supertask.html">
        Returning the system to normal operation
      </a></li></ul></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/transition/task_disruptively_transition_while_move_volumes_from_old_shelves_to_new_shelves.html">
        Disruptively transitioning from MetroCluster FC to MetroCluster IP when retiring storage shelves (ONTAP 9.8 and later)
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/transition/task_disruptively_transition_when_exist_shelves_are_not_supported_on_new_controllers.html">
        Disruptively transitioning when existing shelves are not supported on new controllers (ONTAP 9.8 and later)
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/transition/task_move_an_fc_san_workload_from_mcc_fc_to_mcc_ip_nodes.html">
        Moving an FC SAN workload from MetroCluster FC to MetroCluster IP nodes
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/transition/task_move_linux_iscsi_hosts_from_mcc_fc_to_mcc_ip_nodes.html">
        Moving Linux iSCSI hosts from MetroCluster FC to MetroCluster IP nodes
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/transition/reference_where_to_find_additional_information_mcc_ug.html">
        Where to find additional information
      </a></li></ul></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/upgrade/index.html">
        <div class="na-navbar-padding"> Upgrade or expand the MetroCluster configuration</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/concept_choosing_an_upgrade_method_mcc.html">
        Choosing an upgrade or refresh method
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_upgrade_controllers_in_a_four_node_fc_mcc_us_switchover_and_switchback_mcc_fc_4n_cu.html">
        Upgrading controllers in a MetroCluster FC configuration using switchover and switchback
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_upgrade_controllers_in_a_four_node_ip_mcc_us_switchover_and_switchback_mcc_ip.html">
        Upgrading controllers in a MetroCluster IP configuration using switchover and switchback (ONTAP 9.8 and later)
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_refresh_controllers_in_a_four_node_mcc_fc_configuration.html">
        Refreshing a four-node MetroCluster FC configuration
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_refresh_a_four_node_mcc_configuration_us_volume_move.html">
        Refreshing a four-node MetroCluster IP configuration (ONTAP 9.8 and later)
      </a></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/upgrade/task_expand_a_two_node_mcc_fc_configuration_to_a_four_node_fc_configuration_supertask.html">
        <div class="na-navbar-padding"> Expanding a two-node MetroCluster FC configuration to a four-node configuration</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_verify_the_state_of_the_mcc_configuration_mcc_expansion.html">
        Verifying the state of the MetroCluster configuration
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_send_a_custom_autosupport_message_before_add_nodes_to_the_mcc_configuration_2_node_to_4_node.html">
        Sending a custom AutoSupport message before adding nodes to the MetroCluster configuration
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_zone_for_the_new_controller_ports_in_a_fabric_attached_mcc_configuration_four_node_expansion.html">
        Zoning for the new controller ports when adding a controller module in a fabric-attached MetroCluster configuration
      </a></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/upgrade/task_add_a_new_controller_to_each_cluster_mcc_expansion.html">
        <div class="na-navbar-padding"> Adding a new controller module to each cluster</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_prepare_for_the_upgrade_add_2nd_controller_to_create_ha_pair.html">
        Preparing for the upgrade
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_clear_the_configuration_on_a_controller_module_mcc.html">
        Clearing the configuration on a controller module
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_prepare_cluster_ports_on_the_exist_controller.html">
        Preparing cluster ports on an existing controller module
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_prepare_the_netboot_server_cluster_mode.html">
        Preparing the netboot server to download the image
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_enable_the_ha_mode_on_the_exist_controller_mcc_when_add_a_2nd_controller.html">
        Setting the HA mode on the existing controller module
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_shut_down_the_exist_controller_when_add_a_2nd_controller_in_c_mode.html">
        Shutting down the existing controller module
      </a></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/upgrade/task_install_and_cable_the_new_controller.html">
        <div class="na-navbar-padding"> Installing and cabling the new controller module</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_cable_the_controller_module_s_fc_vi_hba_ports_to_the_fc_switches_controller_to_fc_sw.html">
        Cabling the new controller module&#8217;s FC-VI and HBA ports to the FC switches
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_cable_the_cluster_peering_connections.html">
        Cabling the new controller module&#8217;s cluster peering connections
      </a></li></ul></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_power_up_both_controller_modules_and_display_the_loader_prompt_2_node_mcc_expansion.html">
        Powering up both controller modules and displaying the LOADER prompt
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_change_the_ha_config_setts_mcc_add_a_2nd_controller.html">
        Changing the ha-config setting on the existing and new controller modules
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_set_the_partner_system_id_for_both_controller_modules.html">
        Setting the partner system ID for both controller modules
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_boot_the_exist_controller_module.html">
        Booting the existing controller module
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_assign_disks_to_the_new_controller_mcc_expansion.html">
        Assigning disks to the new controller module
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_netboot_and_set_up_ontap_on_the_new_controller_module_mcc.html">
        Netbooting and setting up ONTAP on the new controller module
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_mirror_the_root_aggregates_mcc_expansion_procedure.html">
        Mirroring the root aggregate on the new controller
      </a></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/upgrade/task_configure_intercluster_lifs.html">
        <div class="na-navbar-padding"> Configuring intercluster LIFs</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_configure_intercluster_lifs_to_use_dedicated_intercluster_ports.html">
        Configuring intercluster LIFs on dedicated ports
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_configure_intercluster_lifs_to_share_data_ports.html">
        Configuring intercluster LIFs on shared data ports
      </a></li></ul></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_create_a_mirrored_data_aggregate_on_each_node_mcc.html">
        Creating a mirrored data aggregate on each node
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_install_licenses_on_the_new_controller_module_cluster_mode.html">
        Installing licenses for the new controller module
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_create_unmirrored_data_aggregates_mcc.html">
        Creating unmirrored data aggregates
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_install_firmware_after_add_a_controller_module.html">
        Installing the firmware after adding a controller module
      </a></li></ul></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_refresh_the_mcc_configuration_mcc_configure_refresh.html">
        Refreshing the MetroCluster configuration with new controllers
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_enable_storage_failover_both_controller_modules_and_set_cluster_ha.html">
        Enabling storage failover on both controller modules and enabling cluster HA
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_restart_the_svms.html">
        Restarting the SVMs
      </a></li></ul></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/upgrade/task_expand_a_four_node_mcc_fc_configuration_to_an_eight_node_configuration.html">
        <div class="na-navbar-padding"> Expanding a four-node MetroCluster FC configuration to an eight-node configuration</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_determin_the_new_cable_layout_mcc_expansion.html">
        Determining the new cabling layout
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_rack_the_new_equipment_mcc_expansion.html">
        Racking the new equipment
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_verify_the_health_of_the_mcc_configuration.html">
        Verifying the health of the MetroCluster configuration
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_check_for_mcc_configuration_errors_with_config_advisor.html">
        Checking for MetroCluster configuration errors with Config Advisor
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_send_a_custom_autosupport_message_before_add_nodes_to_the_mcc_configuration.html">
        Sending a custom AutoSupport message prior to adding nodes to the MetroCluster configuration
      </a></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/upgrade/task_recable_and_zone_a_switch_fabric_mcc_expansion.html">
        <div class="na-navbar-padding"> Recabling and zoning a switch fabric for the new nodes</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_disconnect_the_exist_dr_group_mcc_expansion.html">
        Disconnecting the existing DR group from the fabric
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_apply_the_rcf_files_and_recable_the_switches.html">
        Applying the RCF files and recabling the switches
      </a></li></ul></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/upgrade/task_configure_ontap_on_the_new_controllers_mcc_expansion.html">
        <div class="na-navbar-padding"> Configuring ONTAP on the new controllers</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_clear_the_configuration_on_a_controller_module_mcc.html">
        Clearing the configuration on a controller module
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_assign_disk_ownership_in_aff_systems_mcc.html">
        Assigning disk ownership in AFF systems
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_assign_disk_ownership_to_non_aff_systems_mcc.html">
        Assigning disk ownership in non-AFF systems
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_verify_that_the_ha_state_of_components_is_mcc_dr_smok_crater_or_mcc_expansion.html">
        Verifying the ha-config state of components
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_boot_the_new_controllers_and_join_them_to_the_cluster.html">
        Booting the new controllers and joining them to the cluster
      </a></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/upgrade/task_configure_the_clusters_into_a_mcc_configuration.html">
        <div class="na-navbar-padding"> Configuring the clusters into a MetroCluster configuration</div>
      </a>
      <ul><li class="subfolders "><a href="/us-en/ontap-metrocluster/upgrade/task_configure_intercluster_lifs.html">
        <div class="na-navbar-padding"> Configuring intercluster LIFs</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_configure_intercluster_lifs_to_use_dedicated_intercluster_ports.html">
        Configuring intercluster LIFs on dedicated ports
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_configure_intercluster_lifs_to_share_data_ports.html">
        Configuring intercluster LIFs on shared data ports
      </a></li></ul></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_mirror_the_root_aggregates_mcc.html">
        Mirroring the root aggregates
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_implement_the_mcc_configuration_mcc_refresh_mcc_expansion.html">
        Implementing the MetroCluster configuration
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_create_a_mirrored_data_aggregate_on_each_node_mcc.html">
        Creating a mirrored data aggregate on each node
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_configure_the_fc_to_sas_bridges_for_health_monitor.html">
        Configuring FC-to-SAS bridges for health monitoring
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_move_a_metadata_volume_in_mcc_configurations.html">
        Moving a metadata volume in MetroCluster configurations
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_check_the_mcc_configuration.html">
        Checking the MetroCluster configuration
      </a></li></ul></li></ul></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_check_for_mcc_configuration_errors_with_config_advisor.html">
        Checking for MetroCluster configuration errors with Config Advisor
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_send_a_custom_autosupport_message_after_add_nodes_to_the_mcc_configuration.html">
        Sending a custom AutoSupport message after to adding nodes to the MetroCluster configuration
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_verify_switchover_heal_and_switchback.html">
        Verifying switchover, healing, and switchback
      </a></li></ul></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/concept_removing_a_disaster_recovery_group.html">
        Removing a Disaster Recovery group
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/reference_where_to_find_additional_information_mcc_ug.html">
        Where to find additional information
      </a></li></ul></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/disaster-recovery/index.html">
        <div class="na-navbar-padding"> Disaster Recovery</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/disaster-recovery/concept_dr_workflow.html">
        Workflow for disaster recovery
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/disaster-recovery/task_perform_a_forced_switchover_after_a_disaster.html">
        Performing a forced switchover after a disaster
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/disaster-recovery/concept_choosing_the_correct_recovery_procedure_parent_concept.html">
        Choosing the correct recovery procedure
      </a></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/disaster-recovery/task_recover_from_a_multi_controller_and_or_storage_failure.html">
        <div class="na-navbar-padding"> Recovering from a multi-controller or storage failure</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/disaster-recovery/task_replace_hardware_and_boot_new_controllers.html">
        Replacing hardware and booting new controllers
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/disaster-recovery/task_prepare_for_switchback_in_a_mcc_ip_configuration_supertask.html">
        Preparing for switchback in a MetroCluster IP configuration
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/disaster-recovery/task_prepare_for_switchback_in_a_mcc_fc_configuration_supertask.html">
        Preparing for switchback in a MetroCluster FC configuration
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/disaster-recovery/task_prepare_the_nodes_for_switchback_in_a_mixed_configuration.html">
        Preparing the nodes for switchback in a mixed configuration (recovery during transition)
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/disaster-recovery/task_complete_recovery.html">
        Completing recovery
      </a></li></ul></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/disaster-recovery/task_recover_from_a_non_controller_failure_mcc_dr.html">
        Recovering from a non-controller failure
      </a></li></ul></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/reference_legal_notices.html">
        Legal notices
      </a></li></ul>

<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>

  </div>
  

  <div class="ie-content-pane n-doc__component-detail-content n-doc__component-detail-content--show-code">
    <!-- Begin of page container -->
    <article class="page-content">
      



<div class="n-doc__component-detail-heading-wrap">
  <h1 class="n-doc__component-detail-heading">Preparing for the MetroCluster installation</h1>
</div>


<p class="page-details">
  
    
    <time datetime="2021-04-28 14:39:11 +0000">04/28/2021</time>
    
  


  <span>
    <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/pages/install-ip/concept_prepare_for_the_mcc_installation.pdf" role="button">
      <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>Download PDF of this page</a>
  </span>


</p>


<div id="preamble">
<div class="sectionbody">
<div class="paragraph lead">
<p>As you prepare for the MetroCluster installation, you should understand the MetroCluster hardware architecture and required components.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="differences-between-the-ontap-metrocluster-configurations">Differences between the ONTAP MetroCluster configurations</h2>
<div class="sectionbody">
<div class="paragraph lead">
<p>The various MetroCluster configurations have key differences in the required components.</p>
</div>
<div class="paragraph">
<p>In all configurations, each of the two MetroCluster sites is configured as an ONTAP cluster. In a two-node MetroCluster configuration, each node is configured as a single-node cluster.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Feature</th>
<th class="tableblock halign-left valign-top">IP configurations</th>
<th class="tableblock halign-left valign-top" colspan="2">Fabric attached configurations</th>
<th class="tableblock halign-left valign-top" colspan="2">Stretch configurations</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>Four- or eight-node</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>Two-node</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>Two-node bridge-attached</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>Two-node direct-attached</strong></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Number of controllers</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Four</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Four or eight</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Two</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Two</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Two</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Uses an FC switch storage fabric</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Yes</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Yes</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Uses an IP switch storage fabric</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Yes</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Uses FC-to-SAS bridges</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Yes</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Yes</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Yes</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Uses direct-attached SAS storage</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Yes (local attached only)</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Yes</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Supports ADP</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Yes (starting in ONTAP 9.4)</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Supports local HA</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Yes</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Yes</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Supports ONTAP AUSO</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Yes</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Yes</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Yes</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Yes</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Supports unmirrored aggregates</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Yes (starting in ONTAP 9.8)</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Yes</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Yes</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Yes</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Yes</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Supports array LUNs</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Yes</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Yes</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Yes</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Yes</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Supports ONTAP Mediator</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Yes (starting in ONTAP 9.7)</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Supports MetroCluster Tiebreaker</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Yes (not in combination with ONTAP Mediator)</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Yes</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Yes</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Yes</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Yes</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="access-to-remote-storage-in-metrocluster-ip-configurations">Access to remote storage in MetroCluster IP configurations</h3>
<div class="paragraph lead">
<p>In MetroCluster IP configurations, the only way the local controllers can reach the remote storage pools is via the remote controllers. The IP switches are connected to the Ethernet ports on the controllers; they do not have direct connections to the disk shelves. If the remote controller is down, the local controllers cannot reach their remote storage pools.</p>
</div>
<div class="paragraph">
<p>This is different than MetroCluster FC configurations, in which the remote storage pools are connected to the local controllers via the FC fabric or the SAS connections. The local controllers still have access to the remote storage even if the remote controllers are down.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="considerations-for-using-ontap-mediator-or-metrocluster-tiebreaker">Considerations for using ONTAP Mediator or MetroCluster Tiebreaker</h2>
<div class="sectionbody">
<div class="paragraph lead">
<p>Starting with ONTAP 9.7, you can use either the ONTAP Mediator-assisted automatic unplanned switchover (MAUSO) in the MetroCluster IP configuration or you can use the MetroCluster Tiebreaker software. Only one of the two services can be used with the MetroCluster IP configuration.</p>
</div>
<div class="paragraph">
<p>The different MetroCluster configurations perform automatic switchover under different circumstances:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>MetroCluster FC configurations using the AUSO capability (not present in MetroCluster IP configurations)</strong></p>
<div class="paragraph">
<p>In these configurations, AUSO is initiated if controllers fail but the storage (and bridges, if present) remain operational.</p>
</div>
</li>
<li>
<p><strong>MetroCluster IP configurations using the ONTAP Mediator service (ONTAP 9.7 and later)</strong></p>
<div class="paragraph">
<p>In these configurations, MAUSO is initiated in the same circumstances as AUSO, as described above, and also after a complete site failure (controllers, storage, and switches).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
MAUSO is initiated only if nonvolatile cache mirroring (<em>DR mirroring</em>) and SyncMirror plex mirroring is in sync at the time of the failure.
</td>
</tr>
</table>
</div>
</li>
<li>
<p><strong>MetroCluster IP or FC configurations using the Tiebreaker software in active mode</strong></p>
<div class="paragraph">
<p>In these configurations, the Tiebreaker initiates unplanned switchover after a complete site failure.</p>
</div>
<div class="paragraph">
<p>Before using the Tiebreaker software, review the <a href="../tiebreaker/index.html">MetroCluster Tiebreaker Software Installation and Configuration Guide</a></p>
</div>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="interoperability-of-ontap-mediator-with-other-applications-and-appliances">Interoperability of ONTAP Mediator with other applications and appliances</h3>
<div class="paragraph lead">
<p>You cannot use any third-party applications or appliances that can trigger a switchover in combination with ONTAP Mediator. In addition, monitoring a MetroCluster configuration with MetroCluster Tiebreaker software is not supported when using ONTAP Mediator.</p>
</div>
</div>
<div class="sect2">
<h3 id="how-the-ontap-mediator-supports-automatic-unplanned-switchover">How the ONTAP Mediator supports automatic unplanned switchover</h3>
<div class="paragraph lead">
<p>The ONTAP Mediator stores state information about the MetroCluster nodes in mailboxes located on the Mediator host. The MetroCluster nodes can use this information to monitor the state of their DR partners and implement a Mediator-assisted automatic unplanned switchover (MAUSO) in the case of a disaster.</p>
</div>
<div class="paragraph">
<p>When a node detects a site failure requiring a switchover, it takes steps to confirm that the switchover is appropriate and, if so, performs the switchover.</p>
</div>
<div class="paragraph">
<p>MAUSO is only initiated if both SyncMirror mirroring and DR mirroring of each node&#8217;s nonvolatile cache is operating and the caches and mirrors are synchronized at the time of the failure.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="considerations-for-metrocluster-ip-configuration">Considerations for MetroCluster IP configuration</h2>
<div class="sectionbody">
<div class="paragraph lead">
<p>You should be aware of how the MetroCluster IP addresses and interfaces are implemented in a MetroCluster IP configuration, as well as the associated requirements.</p>
</div>
<div class="paragraph">
<p>In a MetroCluster IP configuration, replication of storage and nonvolatile cache between the HA pairs and the DR partners is performed over high-bandwidth dedicated links in the MetroCluster IP fabric. iSCSI connections are used for storage replication. The IP switches are also used for all intra-cluster traffic within the local clusters. The MetroCluster traffic is kept separate from the intra-cluster traffic by using separate IP subnets and VLANs. The MetroCluster IP fabric is distinct and different from the cluster peering network.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../media/delete_me_mcc_ip_ip_subnets.gif" alt="delete me mcc ip ip subnets">
</div>
</div>
<div class="paragraph">
<p>The MetroCluster IP configuration requires two IP addresses on each node that are reserved for the back-end MetroCluster IP fabric. The reserved IP addresses are assigned to MetroCluster IP logical interfaces (LIFs) during initial configuration, and have the following requirements:</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You must choose the MetroCluster IP addresses carefully because you cannot change them after initial configuration.
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p>They must fall in a unique IP range.</p>
<div class="paragraph">
<p>They must not overlap with any IP space in the environment.</p>
</div>
</li>
<li>
<p>They must reside in one of two IP subnets that separate them from all other traffic.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For example, the nodes might be configured with the following IP addresses:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Node</th>
<th class="tableblock halign-left valign-top">Interface</th>
<th class="tableblock halign-left valign-top">IP address</th>
<th class="tableblock halign-left valign-top">Subnet</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>node_A_1</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>MetroCluster IP interface 1</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>10.1.1.1</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>10.1.1/24</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>node_A_1</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>MetroCluster IP interface 2</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>10.1.2.1</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>10.1.2/24</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>node_A_2</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>MetroCluster IP interface 1</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>10.1.1.2</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>10.1.1/24</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>node_A_2</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>MetroCluster IP interface 2</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>10.1.2.2</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>10.1.2/24</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>node_B_1</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>MetroCluster IP interface 1</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>10.1.1.3</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>10.1.1/24</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>node_B_1</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>MetroCluster IP interface 2</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>10.1.2.3</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>10.1.2/24</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>node_B_2</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>MetroCluster IP interface 1</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>10.1.1.4</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>10.1.1/24</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>node_B_2</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>MetroCluster IP interface 2</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>10.1.2.4</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>10.1.2/24</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="characteristics-of-metrocluster-ip-interfaces">Characteristics of MetroCluster IP interfaces</h3>
<div class="paragraph">
<p>The MetroCluster IP interfaces are specific to MetroCluster IP configurations. They have different characteristics from other ONTAP interface types:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>They are created by the metrocluster configuration-settings interface create command as part the initial MetroCluster configuration.</p>
<div class="paragraph">
<p>They are not created or modified by the network interface commands.</p>
</div>
</li>
<li>
<p>They do not appear in the output of the network interface show command.</p>
</li>
<li>
<p>They do not fail over, but remain associated with the port on which they were created.</p>
</li>
<li>
<p>MetroCluster IP configurations use specific Ethernet ports (depending on the platform) for the MetroCluster IP interfaces.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="considerations-for-automatic-drive-assignment-and-adp-systems-in-ontap-9-4-and-later">Considerations for automatic drive assignment and ADP systems in ONTAP 9.4 and later</h2>
<div class="sectionbody">
<div class="paragraph lead">
<p>Starting with ONTAP 9.4, MetroCluster IP configurations support new installations with AFF systems using ADP (Advanced Drive Partitioning). In most configurations, partitioning and disk assignment is performed automatically during the initial configuration of the MetroCluster sites.</p>
</div>
<div class="paragraph">
<p>ONTAP 9.4 and later releases include the following changes for ADP support:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Pool 0 disk assignments are done at the factory.</p>
</li>
<li>
<p>The unmirrored root is created at the factory.</p>
</li>
<li>
<p>Data partition assignment is done at the customer site during the setup procedure.</p>
</li>
<li>
<p>In most cases, drive assignment and partitioning is done automatically during the setup procedures.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
When upgrading from ONTAP 9.4 to 9.5, the system recognizes the existing disk assignments.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="automatic-partitioning">Automatic partitioning</h3>
<div class="paragraph">
<p>ADP is performed automatically during initial configuration of the platform.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Starting with ONTAP 9.5, disk autoassignment must be enabled for automatic partitioning for ADP to occur.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="how-shelf-by-shelf-automatic-assignment-works">How shelf-by-shelf automatic assignment works</h3>
<div class="paragraph">
<p>If there are four external shelves per site, each shelf is assigned to a different node and different pool, as shown in the following example:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>All of the disks on site_A-shelf_1 are automatically assigned to pool 0 of node_A_1</p>
</li>
<li>
<p>All of the disks on site_A-shelf_3 are automatically assigned to pool 0 of node_A_2</p>
</li>
<li>
<p>All of the disks on site_B-shelf_1 are automatically assigned to pool 0 of node_B_1</p>
</li>
<li>
<p>All of the disks on site_B-shelf_3 are automatically assigned to pool 0 of node_B_2</p>
</li>
<li>
<p>All of the disks on site_B-shelf_2 are automatically assigned to pool 1 of node_A_1</p>
</li>
<li>
<p>All of the disks on site_B-shelf_4 are automatically assigned to pool 1 of node_A_2</p>
</li>
<li>
<p>All of the disks on site_A-shelf_2 are automatically assigned to pool 1 of node_B_1</p>
</li>
<li>
<p>All of the disks on site_A-shelf_4 are automatically assigned to pool 1 of node_B_2</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="how-to-populate-partially-full-shelves">How to populate partially-full shelves</h3>
<div class="paragraph">
<p>If your configuration is using shelves that are not fully populated (have empty drive bays) you must distribute the drives evenly throughout the shelf, depending on the disk assignment policy. The disk assignment policy depends on how many shelves are at each MetroCluster site.</p>
</div>
<div class="paragraph">
<p>If you are using a single shelf at each site (or just the internal shelf on an AFF A800 system), disks are assigned using a quarter-shelf policy. If the shelf is not fully populated,  install the drives equally on all quarters.</p>
</div>
<div class="paragraph">
<p>The following table shows an example of how to place 24 disks in a 48 drive internal shelf. The ownership for the drives is also shown.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">The 48 drive bays are divided into four quarters:</th>
<th class="tableblock halign-left valign-top">Install six drives in the first six bays in each quarter&#8230;&#8203;</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Quarter 1: Bays 0 -11</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Bays 0-5</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Quarter 2: Bays 12-23</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Bays 12-17</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Quarter 3: Bays 24-35</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Bays 24-29</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Quarter 4: Bays 36-48</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Bays 36-41</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>If you are using two shelves at each site, disks are assigned using a half-shelf policy. If the shelves are not fully populated, install the drives equally from either end of the shelf.</p>
</div>
<div class="paragraph">
<p>For example, if you are installing 12 drives in a 24 drive shelf, install drives in bays 0-5 and 18-23.</p>
</div>
</div>
<div class="sect2">
<h3 id="manual-drive-assignment-ontap-9-5">Manual drive assignment (ONTAP 9.5)</h3>
<div class="paragraph">
<p>In ONTAP 9.5, manual drive assignment is required on systems with the following shelf configurations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Three external shelves per site.</p>
<div class="paragraph">
<p>Two shelves are assigned automatically using a half-shelf assignment policy, but the third shelf must be assigned manually.</p>
</div>
</li>
<li>
<p>More than four shelves per site and the total number of external shelves is not a multiple of four.</p>
<div class="paragraph">
<p>Extra shelves above the nearest multiple of four are left unassigned and the drives must be assigned manually. For example, if there are five external shelves at the site, shelf five must be assigned manually.</p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>You only need to manually assign a single drive on each unassigned shelf. The rest of the drives on the shelf are then automatically assigned.</p>
</div>
</div>
<div class="sect2">
<h3 id="manual-drive-assignment-ontap-9-4">Manual drive assignment (ONTAP 9.4)</h3>
<div class="paragraph">
<p>In ONTAP 9.4, manual drive assignment is required on systems with the following shelf configurations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Fewer than four external shelves per site.</p>
<div class="paragraph">
<p>The drives must be assigned manually to ensure symmetrical assignment of the drives, with each pool having an equal number of drives.</p>
</div>
</li>
<li>
<p>More than four external shelves per site and the total number of external shelves is not a multiple of four.</p>
<div class="paragraph">
<p>Extra shelves above the nearest multiple of four are left unassigned and the drives must be assigned manually.</p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>When manually assigning drives, you should assign disks symmetrically, with an equal number of drives assigned to each pool. For example, if the configuration has two storage shelves at each site, you would one shelf to the local HA pair and one shelf to the remote HA pair:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Assign half of the disks on site_A-shelf_1 to pool 0 of node_A_1.</p>
</li>
<li>
<p>Assign half of the disks on site_A-shelf_1 to pool 0 of node_A_2.</p>
</li>
<li>
<p>Assign half of the disks on site_A-shelf_2 to pool 1 of node_B_1.</p>
</li>
<li>
<p>Assign half of the disks on site_A-shelf_2 to pool 1 of node_B_2.</p>
</li>
<li>
<p>Assign half of the disks on site_B-shelf_1 to pool 0 of node_B_1.</p>
</li>
<li>
<p>Assign half of the disks on site_B-shelf_1 to pool 0 of node_B_2.</p>
</li>
<li>
<p>Assign half of the disks on site_B-shelf_2 to pool 1 of node_A_1.</p>
</li>
<li>
<p>Assign half of the disks on site_B-shelf_2 to pool 1 of node_A_2.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="adding-shelves-to-an-existing-configuration">Adding shelves to an existing configuration.</h3>
<div class="paragraph">
<p>Automatic drive assignment supports the symmetrical addition of shelves to an existing configuration.</p>
</div>
<div class="paragraph">
<p>When new shelves are added, the system applies the same assignment policy to newly added shelves. For example, with a single shelf per site, if an additional shelf is added, the systems applies the quarter-shelf assignment rules to the new shelf.</p>
</div>
<div class="paragraph">
<p><strong>Related information</strong></p>
</div>
<div class="paragraph">
<p><a href="concept_required_mcc_ip_components_and_naming_guidelines_mcc_ip.html">Required MetroCluster IP components and naming conventions</a></p>
</div>
<div class="paragraph">
<p><a href="https://docs.netapp.com/ontap-9/topic/com.netapp.doc.dot-cm-psmg/home.html">Disk and aggregate management</a></p>
</div>
</div>
<div class="sect2">
<h3 id="adp-and-disk-assignment-differences-by-system-in-metrocluster-ip-configurations">ADP and disk assignment differences by system in MetroCluster IP configurations</h3>
<div class="paragraph lead">
<p>The operation of Advanced Drive Partitioning (ADP) and automatic disk assignment in MetroCluster IP configurations varies depending on the system model.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
In systems using ADP, aggregates are created using partitions in which each drive is partitioned in to P1, P2 and P3 partitions. The root aggregate is created using P3 partitions.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You must meet the MetroCluster limits for the maximum number of supported drives and other guidelines.</p>
</div>
<div class="paragraph">
<p><a href="https://hwu.netapp.com">NetApp Hardware Universe</a></p>
</div>
<div class="sect3">
<h4 id="adp-and-disk-assignment-on-aff-a320-systems">ADP and disk assignment on AFF A320 systems</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Guideline</th>
<th class="tableblock halign-left valign-top">Shelves per site</th>
<th class="tableblock halign-left valign-top">Drive assignment rules</th>
<th class="tableblock halign-left valign-top">ADP layout for root partition</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Minimum recommended shelves (per site)</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Two shelves</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The drives on each external shelf are divided into two equal groups (halves). Each half-shelf  is automatically assigned to a separate pool.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>One shelf is used by the local HA pair. The second shelf is used by the remote HA pair.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Partitions on each shelf are used to create the root aggregate. Each of the two plexes in the root aggregate includes the following partitions</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Eight partitions for data</p>
</li>
<li>
<p>Two parity partitions</p>
</li>
<li>
<p>Two spare partitions</p>
</li>
</ul>
</div>
</dd>
</dl>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Minimum supported shelves (per site)</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>One shelf</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The drives are divided into four equal groups. Each quarter-shelf is automatically assigned to a separate pool.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Each of the two plexes in the root aggregate includes the following partitions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Three partitions for data</p>
</li>
<li>
<p>Two parity partitions</p>
</li>
<li>
<p>One spare partition</p>
</li>
</ul>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="adp-and-disk-assignment-on-aff-a220-systems">ADP and disk assignment on AFF A220 systems</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Guideline</th>
<th class="tableblock halign-left valign-top">Shelves per site</th>
<th class="tableblock halign-left valign-top">Drive assignment rules</th>
<th class="tableblock halign-left valign-top">ADP layout for root partition</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Minimum recommended shelves (per site)</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Internal drives only</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The internal drives are divided into four equal groups. Each group is automatically assigned to a separate pool and each pool is assigned to a separate controller in the configuration.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Half of the internal drives remain unassigned before MetroCluster is configured.
</td>
</tr>
</table>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Two quarters are used by the local HA pair. The other two quarters are used by the remote HA pair.</p>
</div>
<div class="paragraph">
<p>The root aggregate includes the following partitions in each plex:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Three partitions for data</p>
</li>
<li>
<p>Two parity partitions</p>
</li>
<li>
<p>One spare partition</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Minimum supported shelves (per site)</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>16 internal drives</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The drives are divided into four equal groups. Each quarter-shelf is automatically assigned to a separate pool.</p>
</div>
<div class="paragraph">
<p>Two quarters on a shelf can have the same pool. The pool is chosen based on the node that owns the quarter:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If owned by the local node, pool0 is used.</p>
</li>
<li>
<p>If owned by the remote node, pool1 is used.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For example: a shelf with quarters Q1 through Q4 can have following assignments:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Q1: node_A_1 pool0</p>
</li>
<li>
<p>Q2: node_A_2 pool0</p>
</li>
<li>
<p>Q3: node_B_1 pool1</p>
</li>
<li>
<p>Q4:node_B_2 pool1</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Half of the internal drives remain unassigned before MetroCluster is configured.
</td>
</tr>
</table>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Each of the two plexes in the root aggregate includes the following partitions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>One partition for data</p>
</li>
<li>
<p>Two parity partitions</p>
</li>
<li>
<p>One spare partition</p>
</li>
</ul>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="adp-and-disk-assignment-on-aff-a250-systems">ADP and disk assignment on AFF A250 systems</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Guideline</th>
<th class="tableblock halign-left valign-top">Shelves per site</th>
<th class="tableblock halign-left valign-top">Drive assignment rules</th>
<th class="tableblock halign-left valign-top">ADP layout for root partition</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Minimum recommended shelves (per site)</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Two shelves</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The drives on each external shelf are divided into two equal groups (halves). Each half-shelf  is automatically assigned to a separate pool.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>One shelf is used by the local HA pair. The second shelf is used by the remote HA pair.</p>
</div>
<div class="paragraph">
<p>Partitions on each shelf are used to create the root aggregate. The root aggregate includes the following partitions in each plex:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Eight partitions for data</p>
</li>
<li>
<p>Two parity partitions</p>
</li>
<li>
<p>Two spare partitions</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Minimum supported shelves (per site)</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>24 internal drives only</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The drives are divided into four equal groups. Each quarter-shelf is automatically assigned to a separate pool.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Each of the two plexes in the root aggregate includes the following partitions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Three partitions for data</p>
</li>
<li>
<p>Two parity partitions</p>
</li>
<li>
<p>One spare partition</p>
</li>
</ul>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="adp-and-disk-assignment-on-aff-a300-systems">ADP and disk assignment on AFF A300 systems</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Guideline</th>
<th class="tableblock halign-left valign-top">Shelves per site</th>
<th class="tableblock halign-left valign-top">Drive assignment rules</th>
<th class="tableblock halign-left valign-top">ADP layout for root partition</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Minimum recommended shelves (per site)</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Two shelves</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The drives on each external shelf are divided into two equal groups (halves). Each half-shelf  is automatically assigned to a separate pool.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>One shelf is used by the local HA pair. The second shelf is used by the remote HA pair.</p>
</div>
<div class="paragraph">
<p>Partitions on each shelf are used to create the root aggregate. The root aggregate includes the following partitions in each plex:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Eight partitions for data</p>
</li>
<li>
<p>Two parity partitions</p>
</li>
<li>
<p>Two spare partitions</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Minimum supported shelves (per site)</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>One shelf</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The drives are divided into four equal groups. Each quarter-shelf is automatically assigned to a separate pool.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Each of the two plexes in the root aggregate includes the following partitions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Three partitions for data</p>
</li>
<li>
<p>Two parity partitions</p>
</li>
<li>
<p>One spare partition</p>
</li>
</ul>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="adp-and-disk-assignment-on-aff-a400-systems">ADP and disk assignment on AFF A400 systems</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Guideline</th>
<th class="tableblock halign-left valign-top">Shelves per site</th>
<th class="tableblock halign-left valign-top">Drive assignment rules</th>
<th class="tableblock halign-left valign-top">ADP layout for root partition</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Minimum recommended shelves (per site)</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Four shelves</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Drives are automatically assigned on a shelf-by-shelf basis.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Each of the two plexes in the root aggregate includes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>20 partitions for data</p>
</li>
<li>
<p>Two parity partitions</p>
</li>
<li>
<p>Two spare partitions</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Minimum supported shelves (per site)</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>One shelf</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The drives are divided into four equal groups (quarters). Each quarter-shelf is automatically assigned to a separate pool.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Each of the two plexes in the root aggregate includes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Three partitions for data</p>
</li>
<li>
<p>Two parity partitions</p>
</li>
<li>
<p>One spare partition</p>
</li>
</ul>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="adp-and-disk-assignment-on-aff-a700-systems">ADP and disk assignment on AFF A700 systems</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Guideline</th>
<th class="tableblock halign-left valign-top">Shelves per site</th>
<th class="tableblock halign-left valign-top">Drive assignment rules</th>
<th class="tableblock halign-left valign-top">ADP layout for root partition</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Minimum recommended shelves (per site)</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Four shelves</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Drives are automatically assigned on a shelf-by-shelf basis.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Each of the two plexes in the root aggregate includes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>20 partitions for data</p>
</li>
<li>
<p>Two parity partitions</p>
</li>
<li>
<p>Two spare partitions</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Minimum supported shelves (per site)</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>One shelf</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The drives are divided into four equal groups (quarters). Each quarter-shelf is automatically assigned to a separate pool.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Each of the two plexes in the root aggregate includes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Three partitions for data</p>
</li>
<li>
<p>Two parity partitions</p>
</li>
<li>
<p>One spare partition</p>
</li>
</ul>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="adp-and-disk-assignment-on-aff-a800-systems">ADP and disk assignment on AFF A800 systems</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Guideline</th>
<th class="tableblock halign-left valign-top">Shelves per site</th>
<th class="tableblock halign-left valign-top">Drive assignment rules</th>
<th class="tableblock halign-left valign-top">ADP layout for root aggregate</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Minimum recommended shelves (per site)</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Internal drives and four external shelves</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The internal partitions are divided into four equal groups (quarters). Each quarter is automatically assigned to a separate pool.The drives on the external shelves are automatically assigned on a shelf-by-shelf basis, with all of the drives on each shelf assigned to  one of the four nodes in the MetroCluster configuration.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The root aggregate is created with 12 root partitions on the internal shelf.</p>
</div>
<div class="paragraph">
<p>Each of the two plexes in the root aggregate includes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Eight partitions for data</p>
</li>
<li>
<p>Two parity partitions</p>
</li>
<li>
<p>Two spare partitions</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Minimum supported shelves (per site)</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>24 internal drives only</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The internal partitions are divided into four equal groups (quarters). Each quarter is automatically assigned to a separate pool.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The root aggregate is created with 12 root partitions on the internal shelf.</p>
</div>
<div class="paragraph">
<p>Each of the two plexes in the root aggregate includes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Three partitions for data</p>
</li>
<li>
<p>Two parity partitions</p>
</li>
<li>
<p>One spare partitions</p>
</li>
</ul>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="disk-assignment-on-fas2750-systems">Disk assignment on FAS2750 systems</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Guideline</th>
<th class="tableblock halign-left valign-top">Shelves per site</th>
<th class="tableblock halign-left valign-top">Drive assignment rules</th>
<th class="tableblock halign-left valign-top">ADP layout for root partition</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Minimum recommended shelves (per site)</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>One internal and one external shelf</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The internal and external shelves are divided into two equal halves. Each half is automatically assigned to different pool</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Not applicable.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="disk-assignment-on-fas8200-systems">Disk assignment on FAS8200 systems</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Guideline</th>
<th class="tableblock halign-left valign-top">Shelves per site</th>
<th class="tableblock halign-left valign-top">Drive assignment rules</th>
<th class="tableblock halign-left valign-top">ADP layout for root partition</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Minimum supported shelves (per site)</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Two shelves</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The drives on the external shelves are divided into two equal groups (halves). Each half-shelf  is automatically assigned to a separate pool.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Not applicable.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="disk-assignment-on-fas500f-systems">Disk assignment on FAS500f systems</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Guideline</th>
<th class="tableblock halign-left valign-top">Shelves per site</th>
<th class="tableblock halign-left valign-top">Drive assignment rules</th>
<th class="tableblock halign-left valign-top">ADP layout for root partition</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Minimum recommended shelves (per site)</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Four shelves</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Drives are automatically assigned on a shelf-by-shelf basis.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Not applicable.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="disk-assignment-on-fas9000-systems">Disk assignment on FAS9000 systems</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Guideline</th>
<th class="tableblock halign-left valign-top">Shelves per site</th>
<th class="tableblock halign-left valign-top">Drive assignment rules</th>
<th class="tableblock halign-left valign-top">ADP layout for root partition</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Minimum recommended shelves (per site)</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Four shelves</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Drives are automatically assigned on a shelf-by-shelf basis.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Not applicable.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Minimum supported shelves (per site)</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Two shelves</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The drives on the shelves are divided into two equal groups (halves). Each half-shelf is automatically assigned to a separate pool.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Minimum supported shelves (per site) (active/passive HA configuration)</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="considerations-for-using-all-san-array-systems-in-metrocluster-configurations">Considerations for using All SAN Array systems in MetroCluster configurations</h2>
<div class="sectionbody">
<div class="paragraph lead">
<p>Some All SAN Arrays (ASAs) are supported in MetroCluster configurations. In the MetroCluster documentation, the information for AFF models applies to the corresponding ASA system. For example, all cabling and other information for the AFF A400 system also applies to the ASA AFF A400 system.</p>
</div>
<div class="paragraph">
<p>Supported platform configurations are listed in the <a href="https://hwu.netapp.com">NetApp Hardware Universe</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="considerations-for-configuring-cluster-peering">Considerations for configuring cluster peering</h2>
<div class="sectionbody">
<div class="paragraph lead">
<p>Each MetroCluster site is configured as a peer to its partner site. You should be familiar with the prerequisites and guidelines for configuring the peering relationships and when deciding whether to use shared or dedicated ports for those relationships.</p>
</div>
<div class="paragraph">
<p><strong>Related information</strong></p>
</div>
<div class="paragraph">
<p><a href="http://docs.netapp.com/ontap-9/topic/com.netapp.doc.exp-clus-peer/home.html">Cluster and SVM peering express configuration</a></p>
</div>
<div class="sect2">
<h3 id="prerequisites-for-cluster-peering">Prerequisites for cluster peering</h3>
<div class="paragraph lead">
<p>Before you set up cluster peering, you should confirm that the connectivity, port, IP address, subnet, firewall, and cluster-naming requirements are met.</p>
</div>
<div class="sect3">
<h4 id="connectivity-requirements">Connectivity requirements</h4>
<div class="paragraph">
<p>Every intercluster LIF on the local cluster must be able to communicate with every intercluster LIF on the remote cluster.</p>
</div>
<div class="paragraph">
<p>Although it is not required, it is typically simpler to configure the IP addresses used for intercluster LIFs in the same subnet. The IP addresses can reside in the same subnet as data LIFs, or in a different subnet. The subnet used in each cluster must meet the following requirements:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The subnet must have enough IP addresses available to allocate to one intercluster LIF per node.</p>
<div class="paragraph">
<p>For example, in a six-node cluster, the subnet used for intercluster communication must have six available IP addresses.</p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Each node must have an intercluster LIF with an IP address on the intercluster network.</p>
</div>
<div class="paragraph">
<p>Intercluster LIFs can have an IPv4 address or an IPv6 address.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
ONTAP 9 enables you to migrate your peering networks from IPv4 to IPv6 by optionally allowing both protocols to be present simultaneously on the intercluster LIFs. In earlier releases, all intercluster relationships for an entire cluster were either IPv4 or IPv6. This meant that changing protocols was a potentially disruptive event.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="port-requirements">Port requirements</h4>
<div class="paragraph">
<p>You can use dedicated ports for intercluster communication, or share ports used by the data network. Ports must meet the following requirements:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>All ports that are used to communicate with a given remote cluster must be in the same IPspace.</p>
<div class="paragraph">
<p>You can use multiple IPspaces to peer with multiple clusters. Pair-wise full-mesh connectivity is required only within an IPspace.</p>
</div>
</li>
<li>
<p>The broadcast domain that is used for intercluster communication must include at least two ports per node so that intercluster communication can fail over from one port to another port.</p>
<div class="paragraph">
<p>Ports added to a broadcast domain can be physical network ports, VLANs, or interface groups (ifgrps).</p>
</div>
</li>
<li>
<p>All ports must be cabled.</p>
</li>
<li>
<p>All ports must be in a healthy state.</p>
</li>
<li>
<p>The MTU settings of the ports must be consistent.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="firewall-requirements">Firewall requirements</h4>
<div class="paragraph">
<p>Firewalls and the intercluster firewall policy must allow the following protocols:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>ICMP service</p>
</li>
<li>
<p>TCP to the IP addresses of all the intercluster LIFs over the ports 10000, 11104, and 11105</p>
</li>
<li>
<p>Bidirectional HTTPS between the intercluster LIFs</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The default intercluster firewall policy allows access through the HTTPS protocol and from all IP addresses (0.0.0.0/0). You can modify or replace the policy if necessary.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="considerations-when-using-dedicated-ports">Considerations when using dedicated ports</h3>
<div class="paragraph lead">
<p>When determining whether using a dedicated port for intercluster replication is the correct intercluster network solution, you should consider configurations and requirements such as LAN type, available WAN bandwidth, replication interval, change rate, and number of ports.</p>
</div>
<div class="paragraph">
<p>Consider the following aspects of your network to determine whether using a dedicated port is the best intercluster network solution:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If the amount of available WAN bandwidth is similar to that of the LAN ports and the replication interval is such that replication occurs while regular client activity exists, then you should dedicate Ethernet ports for intercluster replication to avoid contention between replication and the data protocols.</p>
</li>
<li>
<p>If the network utilization generated by the data protocols (CIFS, NFS, and iSCSI) is such that the network utilization is above 50 percent, then you should dedicate ports for replication to allow for nondegraded performance if a node failover occurs.</p>
</li>
<li>
<p>When physical 10 GbE or faster ports are used for data and replication, you can create VLAN ports for replication and dedicate the logical ports for intercluster replication.</p>
<div class="paragraph">
<p>The bandwidth of the port is shared between all VLANs and the base port.</p>
</div>
</li>
<li>
<p>Consider the data change rate and replication interval and whether the amount of data that must be replicated on each interval requires enough bandwidth that it might cause contention with data protocols if sharing data ports.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="considerations-when-sharing-data-ports">Considerations when sharing data ports</h3>
<div class="paragraph lead">
<p>When determining whether sharing a data port for intercluster replication is the correct intercluster network solution, you should consider configurations and requirements such as LAN type, available WAN bandwidth, replication interval, change rate, and number of ports.</p>
</div>
<div class="paragraph">
<p>Consider the following aspects of your network to determine whether sharing data ports is the best intercluster connectivity solution:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>For a high-speed network, such as a 40-Gigabit Ethernet (40-GbE) network, a sufficient amount of local LAN bandwidth might be available to perform replication on the same 40-GbE ports that are used for data access.</p>
<div class="paragraph">
<p>In many cases, the available WAN bandwidth is far less than 10 GbE LAN bandwidth.</p>
</div>
</li>
<li>
<p>All nodes in the cluster might have to replicate data and share the available WAN bandwidth, making data port sharing more acceptable.</p>
</li>
<li>
<p>Sharing ports for data and replication eliminates the extra port counts required to dedicate ports for replication.</p>
</li>
<li>
<p>The maximum transmission unit (MTU) size of the replication network will be the same size as that used on the data network.</p>
</li>
<li>
<p>Consider the data change rate and replication interval and whether the amount of data that must be replicated on each interval requires enough bandwidth that it might cause contention with data protocols if sharing data ports.</p>
</li>
<li>
<p>When data ports for intercluster replication are shared, the intercluster LIFs can be migrated to any other intercluster-capable port on the same node to control the specific data port that is used for replication.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="considerations-for-isls">Considerations for ISLs</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="basic-metrocluster-isl-requirements">Basic MetroCluster ISL requirements</h3>
<div class="paragraph">
<p>The following requirements must be met:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A native-speed ISL switch port must connect to a native-speed ISL switch port.</p>
<div class="paragraph">
<p>For example, a 40 Gbps port connects to a 40 Gbps port.</p>
</div>
</li>
<li>
<p>A 10 Gbps port that is in native mode (i.e., not using a breakout cable) can connect to a 10 Gbps port that is in native mode.</p>
</li>
<li>
<p>The ISLs between the MetroCluster IP switches and the customer network, as well as the ISLs between the intermediate switches, follow the same rules in terms of speed.</p>
</li>
<li>
<p>The number of ISLs that are between the MetroCluster switches and the customer network switches, and the number of ISLs that are between the customer network switches, do not need to match.</p>
<div class="paragraph">
<p>For example, the MetroCluster switches can connect using two ISLs to the intermediate switches, and the intermediate switches can connect to each other using 10 ISLs.</p>
</div>
</li>
<li>
<p>The speed of ISLs that are between the MetroCluster switches and the customer network switches, and the speed of ISLs that are between the customer network switches, do not need to match.</p>
<div class="paragraph">
<p>For example, the MetroCluster switches can connect using a 40-Gbps ISL to the intermediate switches, and the intermediate switches can connect to each other using 100-Gbps ISLs.</p>
</div>
</li>
<li>
<p>The number of and speed of ISLs connecting each MetroCluster switch to the intermediate switch must be the same on both MetroCluster sites.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="considerations-for-sharing-private-layer-2-networks">Considerations for sharing private layer 2 networks</h2>
<div class="sectionbody">
<div class="paragraph lead">
<p>Starting with ONTAP 9.6, MetroCluster IP configurations with supported Cisco switches can share existing networks for ISLs, rather than using dedicated MetroCluster ISLs. Earlier ONTAP versions require dedicated ISLs.</p>
</div>
<div class="paragraph">
<p>MetroCluster IP switches are dedicated to the MetroCluster configuration and cannot be shared. Therefore, a set of MetroCluster IP switches can only connect one MetroCluster configuration. Only the MetroCluster ISL ports on the MetroCluster IP switches can connect to the shared switches.</p>
</div>
<div class="paragraph">
<p>CAUTION:</p>
</div>
<div class="paragraph">
<p>If using a shared network, the customer is responsible for meeting the MetroCluster network requirements in the shared network.</p>
</div>
<div class="sect2">
<h3 id="metrocluster-isl-requirements-in-shared-networks">MetroCluster ISL requirements in shared networks</h3>
<div class="paragraph lead">
<p>When sharing ISL traffic in a shared network, you must ensure that you have adequate capacity and size the ISLs appropriately. Low latency is critical for replication of data between the MetroCluster sites. Latency issues on these connections can impact client I/O.</p>
</div>
<div class="paragraph">
<p>You should review these sections to correctly calculate the required end-to-end capacity of the ISLs. Continuous nonvolatile cache and storage replication with low latency is critical for MetroCluster configurations. The latency in the back-end network impacts the latency and throughput seen by client IO.</p>
</div>
<div class="sect3">
<h4 id="latency-and-packet-loss-limits-in-the-isls">Latency and packet loss limits in the ISLs</h4>
<div class="paragraph">
<p>The following requirements must be met for round-trip traffic between the MetroCluster IP switches at site_A and site_B, with the MetroCluster configuration in steady state operation:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Round trip latency must be less than or equal to 7 ms.</p>
<div class="paragraph">
<p>The maximum distance is 700 km, so the distance between the sites is limited by the latency or the maximum distance, whichever is reached first.</p>
</div>
<div class="paragraph">
<p>As the distance between two MetroCluster sites increases, latency increases, usually in the range of 1 ms round-trip delay time per 100 km (62 miles). This latency also depends on the network service level agreement (SLA) in terms of the bandwidth of the ISL links, packet drop rate, and jitter on the network. Low bandwidth, high jitter, and random packet drops lead to different recovery mechanisms by the switches or the TCP engine on the controller modules for successful packet delivery. These recovery mechanisms can increase overall latency.</p>
</div>
<div class="paragraph">
<p>Any device that contributes to latency must be accounted for.</p>
</div>
</li>
<li>
<p>Packet loss must be less than or equal to 0.01%.</p>
<div class="paragraph">
<p>Packet loss includes physical loss or loss due to congestion or over-subscription.</p>
</div>
<div class="paragraph">
<p>Packet drops can cause retransmissions and a reduced congestion window.</p>
</div>
</li>
<li>
<p>The supported jitter value is 3 ms for round trip (or 1.5 ms for one way).</p>
</li>
<li>
<p>The network should allocate and maintain the SLA for the bandwidth required for MetroCluster traffic, accounting for microbursts and spikes in the traffic.</p>
<div class="paragraph">
<p>Low bandwidth can cause queuing delays and tail drops on switches. If you are using ONTAP 9.7 or later, the network intermediate between the two sites must provide a minimum bandwidth of 4.5 Gbps for the MetroCluster configuration.</p>
</div>
</li>
<li>
<p>MetroCluster traffic should not consume the complete bandwidth and have negative impact on non-MetroCluster traffic.</p>
</li>
<li>
<p>The shared network should have network monitoring configured to monitor the ISLs for utilization, errors (drops, link flaps, corruption, etc.) and failures.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="connection-limits-and-trunking-in-the-customer-switches">Connection limits and trunking in the customer switches</h4>
<div class="paragraph">
<p>The intermediate customer-provided switches must meet the following requirements:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The number of intermediate switches is not limited, and more than two switches between the MetroCluster IP switches is supported.</p>
<div class="paragraph">
<p>The MetroCluster IP switches should be located as close as possible to the intermediate switches providing the long-haul link. All of the ISL connections along the route must meet all of the requirements for MetroCluster ISL.</p>
</div>
</li>
<li>
<p>The ISLs in the customer network (the ISLs between the customer switches) must be configured in such way that sufficient bandwidth is provided and order of delivery is preserved.</p>
<div class="paragraph">
<p>This can be done with trunking a sufficient number of links and enforcing load balancing policies to preserve order.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="other-network-requirements">Other network requirements</h4>
<div class="paragraph">
<p>The intermediate customer-provided switches must meet the following requirements:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The customer network must provide the same VLANs between the sites matching the MetroCluster VLANs as set in the RCF file.</p>
<div class="paragraph">
<p>Layer 2 VLANs with IDs that match the MetroCluster VLAN IDs must span the shared network.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In ONTAP 9.7 and earlier, FAS2750 and AFF A220 systems require VLAN 10 and 20.</p>
</li>
<li>
<p>In ONTAP 9.8 and later, FAS2750, AFF A220, FAS500f, AFF A250, FAS8300, AFF A400, and FAS8700 systems use VLAN 10 and 20 by default. You can configure other VLANs during interface creation, and they must be withing the range 101-4096.
For all the platforms mentioned previously, you can only specify the VLAN during interface creation. Once the MetroCluster interfaces are created, the VLAN ID cannot not be changed. For all other platforms not mentioned previously, you can use any VLAN and you can change the VLAN ID for those platforms at any time, but it requires that a new RCF file is created and applied.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The RcfFileGenerator does not allow the creation of an RCF file using VLANs that are not supported by the platform.
</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The RcfFileGenerator might restrict the use of certain VLAN IDs (for example, if they are intended for future use). Generally, reserved VLANs are up to and including 100.
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p>The MTU size must be set to 9216 on all devices in the end-to-end network.</p>
</li>
<li>
<p>No other traffic can be configured with a higher priority than class of service (COS) five.</p>
</li>
<li>
<p>ECN (explicit congestion notification) must be configured on all end-to-end paths.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="isl-cabling-requirements">ISL cabling requirements</h3>
<div class="paragraph lead">
<p>When using shared ISLs in a MetroCluster IP configuration, you must be aware of the requirements for the end-to-end MetroCluster ISL running from controller ports on site A to controller ports on site B.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You must follow the basic ISL requirements: <a href="concept_prepare_for_the_mcc_installation.html#considerations-for-isls">Considerations for ISLs</a>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="number-of-isls-and-breakout-cables-in-the-shared-network">Number of ISLs and breakout cables in the shared network</h4>
<div class="paragraph">
<p>The number of ISLs connecting the MetroCluster IP switches to the shared network varies depending on the switch model and port type.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">MetroCluster IP switch model</th>
<th class="tableblock halign-left valign-top">Port type</th>
<th class="tableblock halign-left valign-top">Number of ISLs</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Broadcom-supported BES-53248 switches</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Native ports</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>4 ISLs using 10 or 25-Gbps ports</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Cisco 3132Q-V</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Native ports</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>6 ISLs using 40-Gbps ports</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Cisco 3132Q-V</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Breakout cables</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>16 x 10-Gbps ISLs</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Cisco 3232C</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Native ports</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>6 ISLs using 40 or 100-Gbps ports</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Cisco 3232C</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Breakout cables</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>16 x 10-Gbps ISLs</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="ulist">
<ul>
<li>
<p>The use of breakout cables (one physical port is used as 4 x 10 Gbps ports) is supported on Cisco switches.</p>
</li>
<li>
<p>The RCF files for the IP switches have ports in native and breakout mode configured.</p>
<div class="paragraph">
<p>A mix of ISL ports in native port speed mode and breakout mode is not supported. All ISLs from the MetroCluster IP switches to the intermediate switches in one network must be of same speed and length.</p>
</div>
</li>
<li>
<p>The use of external encryption devices (for example, external link encryption or encryption provided via WDM devices) are supported as long as the round-trip latency remains within the above requirements.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For optimum performance, you should use at least a 1 x 40 Gbps or multiple 10 Gbps ISLs per network. Using a single 10 Gbps ISL per network for AFF A800 systems is strongly discouraged.</p>
</div>
<div class="paragraph">
<p>The maximum theoretical throughput of shared ISLs (for example, 240 Gbps with six 40 Gbps ISLs) is a best-case scenario. When using multiple ISLs, statistical load balancing can impact the maximum throughput. Uneven balancing can occur and reduce throughput to that of a single ISL.</p>
</div>
<div class="paragraph">
<p>If the configuration uses L2 VLANs, they must natively span the sites. VLAN overlay such as Virtual Extensible LAN (VXLAN) is not supported.</p>
</div>
<div class="paragraph">
<p>ISLs carrying MetroCluster traffic must be native links between the switches. Link sharing services such as Multiprotocol Label Switching (MPLS) links are not supported.</p>
</div>
</div>
<div class="sect3">
<h4 id="support-for-wan-isls-on-the-broadcom-bes53248-switch">Support for WAN ISLs on the Broadcom BES53248 switch</h4>
<div class="ulist">
<ul>
<li>
<p>Minimum number of WAN ISLs per fabric: 1 (10 GbE, or 25 GbE, or 40 GbE, or 100 GbE)</p>
</li>
<li>
<p>Maximum number of 10-GbE WAN ISLs per fabric: 4</p>
</li>
<li>
<p>Maximum number of 25-GbE WAN ISLs per fabric: 4</p>
</li>
<li>
<p>Maximum number of 40-GbE WAN ISLs per fabric: 2</p>
</li>
<li>
<p>Maximum number of 100-GbE WAN ISLs per fabric: 2</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A 40-GbE or 100-GbE WAN ISL requires an RCF file version 1.40 or higher.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Extra licenses are required for additional ports.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="required-settings-on-intermediate-switches">Required settings on intermediate switches</h3>
<div class="paragraph lead">
<p>When sharing ISL traffic in a shared network, the configuration of the intermediate switches provided by the customer must ensure that the MetroCluster traffic (RDMA and storage) meets the required service levels across the entire path between the MetroCluster sites.</p>
</div>
<div class="paragraph">
<p>The following examples are for Cisco Nexus 3000 switches and IP Broadcom switches. Depending on your switch vendor and models, you must ensure that your intermediate switches have an equivalent configuration.</p>
</div>
<div class="sect3">
<h4 id="cisco-nexus-switches">Cisco Nexus switches</h4>
<div class="paragraph">
<p>The following diagram gives an overview of the required settings for a shared network when the external switches are Cisco switches.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../media/delete_me_switch_traffic_with_cisco_switches.png" alt="delete me switch traffic with cisco switches">
</div>
</div>
<div class="paragraph">
<p>In this example, the following policies and maps are created for MetroCluster traffic:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A MetroClusterIP_Ingress policy is applied to ports on the intermediate switch that connect to the MetroCluster IP switches.</p>
<div class="paragraph">
<p>The MetroClusterIP_Ingress policy maps the incoming tagged traffic to the appropriate queue on the intermediate switch. Tagging happens on the node-port, not on the ISL. Non-MetroCluster traffic that is using the same ports on the ISL remains in the default queue.</p>
</div>
</li>
<li>
<p>A MetroClusterIP_Egress policy is applied to ports on the intermediate switch that connect to ISLs between intermediate switches</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You must configure the intermediate switches with matching QoS access-maps, class-maps, and policy-maps along the path between the MetroCluster IP switches. The intermediate switches map RDMA traffic to COS5 and storage traffic to COS4.</p>
</div>
<div class="paragraph">
<p>The following example shows the configuration for a customer-provided Cisco Nexus 3000 switch. If you have Cisco switches, you can use the example to configure the switch along the path without much difficulty. If you do not have Cisco switches, you must determine and apply the equivalent configuration to your intermediate switches.</p>
</div>
<div class="paragraph">
<p>The following example shows the class map definitions:</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This example is for configurations using Cisco MetroCluster IP switches. You can follow this example regardless of the switch types of the switches carrying MetroCluster traffic that do not connect to a MetroCluster IP switch.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre>class-map type qos match-all rdma
   match cos 5
class-map type qos match-all storage
   match cos 4</pre>
</div>
</div>
<div class="paragraph">
<p>The following example shows the policy map definitions:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>policy-map type qos MetroClusterIP_Ingress
   class rdma
      set dscp 40
      set cos 5
      set qos-group 5
   class storage
      set dscp 32
      set cos 4
      set qos-group 4
policy-map type queuing MetroClusterIP_Egress
   class type queuing c-out-8q-q7
      priority level 1
   class type queuing c-out-8q-q6
      priority level 2
   class type queuing c-out-8q-q5
      priority level 3
      random-detect threshold burst-optimized ecn
   class type queuing c-out-8q-q4
      priority level 4
      random-detect threshold burst-optimized ecn
   class type queuing c-out-8q-q3
      priority level 5
   class type queuing c-out-8q-q2
      priority level 6
   class type queuing c-out-8q-q1
      priority level 7
   class type queuing c-out-8q-q-default
      bandwidth remaining percent 100
      random-detect threshold burst-optimized ecn</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="metrocluster-ip-broadcom-switches">MetroCluster IP Broadcom switches</h4>
<div class="paragraph">
<p>The following diagram gives an overview of the required settings for a shared network when the external switches are IP Broadcom switches.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../media/delete_me_switch_traffic_with_broadcom_switches.png" alt="delete me switch traffic with broadcom switches">
</div>
</div>
<div class="paragraph">
<p>Configurations using MetroCluster IP Broadcom switches require additional configuration:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>For exterior switches you must configure the access and class maps to classify the traffic on ingress to the customer network.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This is not required on configurations using MetroCluster IP switches.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following example shows how to configure the access and class maps on the first and last customer switches connecting the ISLs between the MetroCluster IP Broadcom switches.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>ip access-list storage
  10 permit tcp any eq 65200 any
  20 permit tcp any any eq 65200
ip access-list rdma
  10 permit tcp any eq 10006 any
  20 permit tcp any any eq 10006

class-map type qos match-all storage
  match access-group name storage
class-map type qos match-all rdma
  match access-group name rdma</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>You need to assign the ingress policy to the ISL switch port on the first customer switch.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following example shows the class map definitions:</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This example is for configurations using Cisco MetroCluster IP switches. You can follow this example regardless of the switch types of the switches carrying MetroCluster traffic that do not connect to a MetroCluster IP switch.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre>class-map type qos match-all rdma
   match cos 5
class-map type qos match-all storage
   match cos 4</pre>
</div>
</div>
<div class="paragraph">
<p>The following example shows the policy map definitions:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>policy-map type qos MetroClusterIP_Ingress
   class rdma
      set dscp 40
      set cos 5
      set qos-group 5
   class storage
      set dscp 32
      set cos 4
      set qos-group 4
policy-map type queuing MetroClusterIP_Egress
   class type queuing c-out-8q-q7
      priority level 1
   class type queuing c-out-8q-q6
      priority level 2
   class type queuing c-out-8q-q5
      priority level 3
      random-detect threshold burst-optimized ecn
   class type queuing c-out-8q-q4
      priority level 4
      random-detect threshold burst-optimized ecn
   class type queuing c-out-8q-q3
      priority level 5
   class type queuing c-out-8q-q2
      priority level 6
   class type queuing c-out-8q-q1
      priority level 7
   class type queuing c-out-8q-q-default
      bandwidth remaining percent 100
      random-detect threshold burst-optimized ecn</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="intermediate-customer-switches">Intermediate customer switches</h4>
<div class="ulist">
<ul>
<li>
<p>For intermediate customer switches, you must assign the egress policy to the ISL switch ports.</p>
</li>
<li>
<p>For all other interior switches along the path that carry MetroCluster traffic, follow the class map and policy map examples in the section <em>Cisco Nexus 3000 switches</em>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="examples-of-metrocluster-network-topologies">Examples of MetroCluster network topologies</h3>
<div class="paragraph lead">
<p>Starting with ONTAP 9.6, some shared ISL network configurations are supported for MetroCluster IP configurations.</p>
</div>
<div class="sect3">
<h4 id="shared-network-configuration-with-direct-links">Shared network configuration with direct links</h4>
<div class="paragraph">
<p>In this topology, two distinct sites are connected by direct links. These links can be between Wavelength Division Multiplexing equipment (xWDM) or switches. The capacity of the ISLs is not dedicated to the MetroCluster traffic but is shared with other traffic.</p>
</div>
<div class="paragraph">
<p>The ISL capacity must meet the minimum requirements. Depending on whether you use xWDM devices or switches a different combination of network configurations might apply.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../media/delete_me_mcc_ip_networking_with_shared_isls.gif" alt="delete me mcc ip networking with shared isls">
</div>
</div>
</div>
<div class="sect3">
<h4 id="shared-infrastructure-with-intermediate-networks">Shared infrastructure with intermediate networks</h4>
<div class="paragraph">
<p>In this topology, the MetroCluster IP core switch traffic and the host traffic travel through a network that is not provided by NetApp. The network infrastructure and the links (including leased direct links) are outside of the MetroCluster configuration. The network can consist of a series of xWDM and switches but unlike the shared configuration with direct ISLs, the links are not direct between the sites. Depending on the infrastructure between the sites, any combination of network configurations is possible. The intermediate infrastructure is represented as a &#8220;cloud&#8221; (multiple devices can exist between the sites), but it is still under the control of the customer. Capacity through this intermediate infrastructure is not dedicated to the MetroCluster traffic but is shared with other traffic.</p>
</div>
<div class="paragraph">
<p>The VLAN and network xWDM or switch configuration must meet the minimum requirements.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../media/delete_me_mcc_ip_networking_with_intermediate_private_networks.gif" alt="delete me mcc ip networking with intermediate private networks">
</div>
</div>
</div>
<div class="sect3">
<h4 id="two-metrocluster-configurations-sharing-an-intermediate-network">Two MetroCluster configurations sharing an intermediate network</h4>
<div class="paragraph">
<p>In this topology, two separate MetroCluster configurations are sharing the same intermediate network. In the example, MetroCluster one switch_A_1 and MetroCluster two switch_A_1 both connect to the same intermediate switch.</p>
</div>
<div class="paragraph">
<p>The example is simplified for illustration purposes only:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../media/delete_me_mcc_ip_two_mccs_sharing_the_same_shared_network_sx.gif" alt="delete me mcc ip two mccs sharing the same shared network sx">
</div>
</div>
</div>
<div class="sect3">
<h4 id="two-metrocluster-configurations-with-one-connecting-directly-to-the-intermediate-network">Two MetroCluster configurations with one connecting directly to the intermediate network</h4>
<div class="paragraph">
<p>This topology is supported beginning with ONTAP 9.7. Two separate MetroCluster configurations share the same intermediate network and one MetroCluster configuration&#8217;s nodes is directly connected to the intermediate switch.</p>
</div>
<div class="paragraph">
<p>MetroCluster One is a MetroCluster configuration using NetApp validated switches, ONTAP 9.6 and a shared topology. MetroCluster Two is a MetroCluster configuration using NetApp compliant switches and ONTAP 9.7.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The intermediate switches must be compliant with NetApp specifications.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><a href="concept_prepare_for_the_mcc_installation.html#considerations-for-using-metrocluster-compliant-switches">Considerations for using MetroCluster compliant switches</a></p>
</div>
<div class="paragraph">
<p>The example is simplified for illustration purposes only:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../media/delete_me_mcc_ip_unsupported_two_mccs_direct_to_shared_switches.png" alt="delete me mcc ip unsupported two mccs direct to shared switches">
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="considerations-for-using-metrocluster-compliant-switches">Considerations for using MetroCluster compliant switches</h2>
<div class="sectionbody">
<div class="paragraph lead">
<p>MetroCluster IP switches provided by NetApp are NetApp validated. Beginning with ONTAP 9.7, MetroCluster IP configurations can support switches that are not NetApp validated provided that they are compliant with NetApp specifications.</p>
</div>
<div class="sect2">
<h3 id="general-requirements">General requirements</h3>
<div class="paragraph">
<p>The requirements show how to configure MetroCluster compliant switches without using reference configuration (RCF) files.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Only platforms that provide dedicated ports for switchless cluster interconnects are supported. Platforms such as FAS2750 and AFF A220 are not supported because MetroCluster traffic and MetroCluster interconnect traffic share the same network ports.</p>
<div class="paragraph">
<p>Connecting local cluster connections to a MetroCluster compliant switch is not supported.</p>
</div>
</li>
<li>
<p>The MetroCluster IP interface can be connected to any switch port that can be configured to meet the requirements.</p>
</li>
<li>
<p>The speed of the switch ports must be 25 Gbps for FAS8200 and AFF A300 platforms, and at least 40 Gbps for all other platforms (40 Gbps or 100 Gbps).</p>
</li>
<li>
<p>The ISLs must be 10 Gbps or higher and must be sized appropriately for the load on the MetroCluster configuration.</p>
</li>
<li>
<p>The MetroCluster configuration must be connected to two networks. Connecting both the MetroCluster interfaces to the same network or switch is not supported. Each MetroCluster node must be connected to two network switches.</p>
</li>
<li>
<p>The network must meet the requirements as outlined in the sections <a href="concept_prepare_for_the_mcc_installation.html#metrocluster-isl-requirements-in-shared-networks">MetroCluster ISL requirements in shared networks</a>, <a href="concept_prepare_for_the_mcc_installation.html#isl-cabling-requirements">ISL cabling requirements</a>, and <a href="concept_prepare_for_the_mcc_installation.html#required-settings-on-intermediate-switches">Required settings on intermediate switches</a>.</p>
</li>
<li>
<p>In MetroCluster IP configurations using open networks, reverting to ONTAP 9.6 or earlier is not supported.</p>
</li>
<li>
<p>The MTU of 9216 must be configured on all switches that carry MetroCluster IP traffic.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="switch-and-cabling-requirements">Switch and cabling requirements</h3>
<div class="ulist">
<ul>
<li>
<p>The switches must support QoS/traffic classification.</p>
</li>
<li>
<p>The switches must support explicit congestion notification (ECN).</p>
</li>
<li>
<p>The switches must support L4 port-vlan load-balancing policies to preserve order along the path.</p>
</li>
<li>
<p>The switches must support L2 Flow Control (L2FC).</p>
</li>
<li>
<p>The cables connecting the nodes to the switches must be purchased from NetApp. The cables we provide must be supported by the switch vendor.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="limitations">Limitations</h3>
<div class="paragraph">
<p>Any configuration or feature that requires that the local cluster connections are connected to a switch is not supported. For example, the following configurations and procedures are not supported:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Eight-node MetroCluster configurations</p>
</li>
<li>
<p>Transitioning from MetroCluster FC to MetroCluster IP configurations</p>
</li>
<li>
<p>Refreshing a four-node MetroCluster IP configuration</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="platform-specific-network-speeds-for-metrocluster-compliant-switches">Platform-specific network speeds for MetroCluster compliant switches</h3>
<div class="paragraph">
<p>The following table provides platform-specific network speeds for MetroCluster compliant switches.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Missing values indicate that the platform is not supported.
</td>
</tr>
</table>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Platform</th>
<th class="tableblock halign-left valign-top">Network Speed (Gbps)</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>AFF A800</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>40 or 100</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>AFF A700</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>40</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>AFF A400</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>100</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>AFF A320</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>100</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>AFF A300</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>25</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>AFF A250</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>-</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>AFF A220</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>-</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>FAS9000</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>40</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>FAS8700</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>100</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>FAS8300</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>100</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>FAS8200</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>25</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>FAS2750</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>-</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>FAS500f</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>-</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="assumptions-for-the-examples">Assumptions for the examples</h3>
<div class="paragraph">
<p>The examples provided are valid for Cisco NX31xx and NX32xx switches. If other switches are used, these commands can be used as guidance, but the commands might be different. If a feature shown in the examples is not available on the switch, this means that the switch does not meet the minimum requirements and cannot be used to deploy a MetroCluster configuration. This is true for any switch that is connecting a MetroCluster configuration and for all switches on the path between those switches.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The ISL ports are 15 and 16 and operate at a speed of 40 Gbps.</p>
</li>
<li>
<p>The VLAN in network 1 is 10 and the VLAN in network 2 is 20. Examples might be shown for one network only.</p>
</li>
<li>
<p>The MetroCluster interface is connected to port 9 on each switch and operates at a speed of 100 Gbps.</p>
</li>
<li>
<p>The full context of the examples is not set or shown. You might need to enter further configuration information such as the profile, VLAN, or interface, to execute the commands.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="generic-switch-configuration">Generic switch configuration</h3>
<div class="paragraph">
<p>A VLAN in each network must be configured. The example shows how to configure a VLAN in network 10.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># vlan 10</pre>
</div>
</div>
<div class="paragraph">
<p>The load balancing policy should be set so that order is preserved.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># port-channel load-balance src-dst ip-l4port-vlan</pre>
</div>
</div>
<div class="paragraph">
<p>You must configure the access and class maps, which map the RDMA and iSCSI traffic to the appropriate classes.</p>
</div>
<div class="paragraph">
<p>All TCP traffic to and from the port 65200 is mapped to the storage (iSCSI) class. All TCP traffic to and from the port 10006 is mapped to the RDMA class.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>ip access-list storage
  10 permit tcp any eq 65200 any
  20 permit tcp any any eq 65200
ip access-list rdma
  10 permit tcp any eq 10006 any
  20 permit tcp any any eq 10006

class-map type qos match-all storage
  match access-group name storage
class-map type qos match-all rdma
  match access-group name rdma</pre>
</div>
</div>
<div class="paragraph">
<p>You must configure the ingress policy. The ingress policy maps the traffic as classified to the different COS groups. In this example, the RDMA traffic is mapped to COS group 5 and iSCSI traffic is mapped to COS group 4.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>policy-map type qos MetroClusterIP_Ingress
class rdma
  set dscp 40
  set cos 5
  set qos-group 5
class storage
  set dscp 32
  set cos 4
  set qos-group 4</pre>
</div>
</div>
<div class="paragraph">
<p>You must configure the egress policy on the switch. The egress policy maps the traffic to the egress queues. In this example, RDMA traffic is mapped to queue 5 and iSCSI traffic is mapped to queue 4.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>policy-map type queuing MetroClusterIP_Egress
class type queuing c-out-8q-q7
  priority level 1
class type queuing c-out-8q-q6
  priority level 2
class type queuing c-out-8q-q5
  priority level 3
  random-detect threshold burst-optimized ecn
class type queuing c-out-8q-q4
  priority level 4
  random-detect threshold burst-optimized ecn
class type queuing c-out-8q-q3
  priority level 5
class type queuing c-out-8q-q2
  priority level 6
class type queuing c-out-8q-q1
  priority level 7
class type queuing c-out-8q-q-default
  bandwidth remaining percent 100
  random-detect threshold burst-optimized ecn</pre>
</div>
</div>
<div class="paragraph">
<p>You need to configure a switch that has MetroCluster traffic on an ISL but does not connect to any MetroCluster interfaces. In this case, the traffic is already classified and only needs to be mapped to the appropriate queue. In the following example, all of the COS5 traffic is mapped to the class RDMA, and all of the COS4 traffic is mapped to the class iSCSI. Note that this will affect <strong>all</strong> of the COS5 and COS4 traffic, not only the MetroCluster traffic. If you only want to map the MetroCluster traffic, then you must use the above class maps to identify the traffic using the access groups.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>class-map type qos match-all rdma
  match cos 5
class-map type qos match-all storage
  match cos 4</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="configuring-the-isls">Configuring the ISLs</h3>
<div class="paragraph">
<p>You can configure a 'trunk' mode port when setting an allowed VLAN.</p>
</div>
<div class="paragraph">
<p>There are two commands, one to <strong>set</strong> the allowed VLAN list, and one to <strong>add</strong> to the existing allowed VLAN list.</p>
</div>
<div class="paragraph">
<p>You can <strong>set</strong> the allowed VLANs as shown in the example.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>switchport trunk allowed vlan 10</pre>
</div>
</div>
<div class="paragraph">
<p>You can <strong>add</strong> a VLAN to the allowed list as shown in the example.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>switchport trunk allowed vlan add 10</pre>
</div>
</div>
<div class="paragraph">
<p>In the example, port-channel 10 is configured for VLAN 10.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>interface port-channel10
switchport mode trunk
switchport trunk allowed vlan 10
mtu 9216
service-policy type queuing output MetroClusterIP_Egress</pre>
</div>
</div>
<div class="paragraph">
<p>The ISL ports should be configured as part of a port-channel and be assigned the egress queues as shown in the example.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>interface eth1/15-16
switchport mode trunk
switchport trunk allowed vlan 10
no lldp transmit
no lldp receive
mtu 9216
channel-group 10 mode active
service-policy type queuing output MetroClusterIP_Egress
no shutdown</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="configuring-the-node-ports">Configuring the node ports</h3>
<div class="paragraph">
<p>You might need to configure the node port in breakout mode. In this example, ports 25 and 26 are configured in 4 x 25 Gbps breakout mode.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>interface breakout module 1 port 25-26 map 25g-4x</pre>
</div>
</div>
<div class="paragraph">
<p>You might need to configure the MetroCluster interface port speed. The example shows how to configure the speed to "auto".</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>speed auto</pre>
</div>
</div>
<div class="paragraph">
<p>The following example shows how to fix the speed at 40 Gbps.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>speed 40000</pre>
</div>
</div>
<div class="paragraph">
<p>You might need to configure the interface. In the following example, the interface speed is set to "auto".</p>
</div>
<div class="paragraph">
<p>The port is in access mode in VLAN 10, MTU is set to 9216 and the MetroCluster ingress policy is assigned.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>interface eth1/9
description MetroCluster-IP Node Port
speed auto
switchport access vlan 10
spanning-tree port type edge
spanning-tree bpduguard enable
mtu 9216
flowcontrol receive on
flowcontrol send on
service-policy type qos input MetroClusterIP_Ingress
no shutdown</pre>
</div>
</div>
<div class="paragraph">
<p>On 25-Gbps ports, the FEC setting might need to be set to "off" as shown in the example.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>fec off</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You must always run this command <strong>after</strong> the interface is configured. A transceiver module might need to be inserted for the command to work.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="considerations-for-using-virtual-ip-and-border-gateway-protocol-with-a-metrocluster-configuration">Considerations for using virtual IP and Border Gateway Protocol with a MetroCluster configuration</h2>
<div class="sectionbody">
<div class="paragraph lead">
<p>Starting with ONTAP 9.5, ONTAP supports layer 3 connectivity using virtual IP (VIP) and Border Gateway Protocol (BGP). The combination VIP and BGP for redundancy in the front-end networking with the back-end MetroCluster redundancy provides a layer 3 disaster recovery solution.</p>
</div>
<div class="paragraph">
<p>Review the following guidelines and illustration when planning your layer 3 solution. For details on implementing VIP and BGP in ONTAP, refer to the following section:</p>
</div>
<div class="paragraph">
<p><a href="http://docs.netapp.com/ontap-9/topic/com.netapp.doc.dot-cm-nmg/GUID-A8EF6D34-1717-4813-BBFA-AA33E104CF6F.html"><strong>Configuring virtual IP (VIP) LIFs</strong></a></p>
</div>
<div class="imageblock">
<div class="content">
<img src="../media/vip_and_bgp_in_metrocluster_2.png" alt="vip and bgp in metrocluster 2">
</div>
</div>
<div class="sect2">
<h3 id="ontap-limitations">ONTAP limitations</h3>
<div class="paragraph">
<p>ONTAP does not automatically verify that all nodes on both sites of the MetroCluster configuration are configured with BGP peering.</p>
</div>
<div class="paragraph">
<p>ONTAP does not perform route aggregation but announces all individual virtual LIF IPs as unique host routes at all times.</p>
</div>
<div class="paragraph">
<p>ONTAP does not support true AnyCast&#8201;&#8212;&#8201;only a single node in the cluster presents a specific virtual LIF IP (but is accepted by all physical interfaces, regardless of whether they are BGP LIFs, provided the physical port is part of the correct IPspace). Different LIFs can migrate independently of each other to different hosting nodes.</p>
</div>
</div>
<div class="sect2">
<h3 id="guidelines-for-using-this-layer-3-solution-with-a-metrocluster-configuration">Guidelines for using this Layer 3 solution with a MetroCluster configuration</h3>
<div class="paragraph">
<p>You must configure your BGP and VIP correctly to provide the required redundancy.</p>
</div>
<div class="paragraph">
<p>Simpler deployment scenarios are preferred over more complex architectures (for example, a BGP peering router is reachable across an intermediate, non-BGP router). However, ONTAP does not enforce network design or topology restrictions.</p>
</div>
<div class="paragraph">
<p>VIP LIFs only cover the frontend/data network.</p>
</div>
<div class="paragraph">
<p>Depending on your version of ONTAP, you must configure BGP peering LIFs in the node SVM, not the system or data SVM. In 9.8, the BGP LIFs are visible in the cluster (system) SVM and the node SVMs are no longer present.</p>
</div>
<div class="paragraph">
<p>Each data SVM requires the configuration of all potential first hop gateway addresses (typically, the BGP router peering IP address), so that the return data path is available if a LIF migration or MetroCluster failover occurs.</p>
</div>
<div class="paragraph">
<p>BGP LIFs are node specific, similar to intercluster LIFs&#8201;&#8212;&#8201;each node has a unique configuration, which does not need to be replicated to DR site nodes.</p>
</div>
<div class="paragraph">
<p>configured, the existence of the v0a (v0b and so on.) continuously validates the connectivity, guaranteeing that a LIF migrate or failover succeeds (unlike L2, where a broken configuration is only visible after the outage).</p>
</div>
<div class="paragraph">
<p>A major architectural difference is that clients should no longer share the same IP subnet as the VIP of data SVMs. An L3 router with appropriate enterprise grade resiliency and redundancy features enabled (for example, VRRP/HSRP) should be on the path between storage and clients for the VIP to operate correctly.</p>
</div>
<div class="paragraph">
<p>The reliable update process of BGP allows for smoother LIF migrations because they are marginally faster and have a lower chance of interruption to some clients</p>
</div>
<div class="paragraph">
<p>You can configure BGP to detect some classes of network or switch misbehaviors faster than LACP, if configured accordingly.</p>
</div>
<div class="paragraph">
<p>External BGP (EBGP) uses different AS numbers between ONTAP node(s) and peering routers and is the preferred deployment to ease route aggregation and redistribution on the routers. Internal BGP (IBGP) and the use of route reflectors is not impossible but outside the scope of a straightforward VIP setup.</p>
</div>
<div class="paragraph">
<p>After deployment, you must check that the data SVM is accessible when the associated virtual LIF is migrated between all nodes on each site (including MetroCluster switchover) to verify the correct configuration of the static routes to the same data SVM.</p>
</div>
<div class="paragraph">
<p>VIP works for most IP-based protocols (NFS, SMB, iSCSI).</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="considerations-for-using-tdmxwdm-and-encryption-equipment-with-metrocluster-ip-configurations">Considerations for using TDM/xWDM and encryption equipment with MetroCluster IP configurations</h2>
<div class="sectionbody">
<div class="paragraph lead">
<p>You should be aware of certain considerations for using multiplexing equipment in the MetroCluster IP configuration.</p>
</div>
<div class="paragraph">
<p>These considerations apply only to direct, dedicated MetroCluster back-end links and switches, not links shared with non-MetroCluster traffic.</p>
</div>
<div class="paragraph">
<p>The Hardware Universe tool provides some notes about the requirements that TDM/xWDM equipment must meet to work with a MetroCluster IP configuration.</p>
</div>
<div class="paragraph">
<p><a href="https://hwu.netapp.com">NetApp Hardware Universe</a></p>
</div>
<div class="sect2">
<h3 id="using-encryption-on-wdm-or-external-encryption-devices">Using encryption on WDM or external encryption devices</h3>
<div class="paragraph">
<p>When using encryption on WDM devices in the MetroCluster IP configuration, your environment must meet the following requirements:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The external encryption devices or DWDM equipment must have been certified by the vendor with the switch in question.</p>
<div class="paragraph">
<p>The certification should cover the operating mode (such as trunking and encryption).</p>
</div>
</li>
<li>
<p>The overall end-to-end latency and jitter, including the encryption, cannot be above the maximum stated in the IMT or in this document.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="sfp-considerations">SFP considerations</h3>
<div class="paragraph">
<p>Any SFPs or QSFPs supported by the equipment vendor are supported for the MetroCluster ISLs. SFPs and QSFPs can be acquired from NetApp or the equipment vendor.</p>
</div>
</div>
<div class="sect2">
<h3 id="considerations-for-isls-2">Considerations for ISLs</h3>
<div class="paragraph">
<p>The ISLs on one fabric should all be the same speed and length.</p>
</div>
<div class="paragraph">
<p>The ISLs on one fabric should all have the same topology. For example, they should all be direct links, or if the configuration uses WDM, then they should all use WDM.</p>
</div>
<div class="paragraph">
<p>If you are sharing ISLs with a non-MetroCluster network, you must follow the guidelines in the section <a href="concept_prepare_for_the_mcc_installation.html#considerations-for-sharing-private-layer-2-networks">Considerations for sharing private layer 2 networks</a>.</p>
</div>
<div class="paragraph">
<p>The maximum supported difference in distance between fabric 1 and fabric 2 is 20 km.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="considerations-when-using-unmirrored-aggregates">Considerations when using unmirrored aggregates</h2>
<div class="sectionbody">
<div class="paragraph lead">
<p>If your configuration includes unmirrored aggregates, you must be aware of potential access issues after switchover operations.</p>
</div>
<div class="sect2">
<h3 id="considerations-for-unmirrored-aggregates-when-doing-maintenance-requiring-power-shutdown">Considerations for unmirrored aggregates when doing maintenance requiring power shutdown</h3>
<div class="paragraph">
<p>If you are performing negotiated switchover for maintenance reasons requiring site-wide power shutdown, you should first manually take offline any unmirrored aggregates owned by the disaster site.</p>
</div>
<div class="paragraph">
<p>If you do not, nodes at the surviving site might go down due to multi-disk panics. This could occur if switched-over unmirrored aggregates go offline or are missing because of the loss of connectivity to storage at the disaster site due to the power shutdown or a loss of ISLs.</p>
</div>
</div>
<div class="sect2">
<h3 id="considerations-for-unmirrored-aggregates-and-hierarchical-namespaces">Considerations for unmirrored aggregates and hierarchical namespaces</h3>
<div class="paragraph">
<p>If you are using hierarchical namespaces, you should configure the junction path so that all of the volumes in that path are either on mirrored aggregates only or on unmirrored aggregates only. Configuring a mix of unmirrored and mirrored aggregates in the junction path might prevent access to the unmirrored aggregates after the switchover operation.</p>
</div>
</div>
<div class="sect2">
<h3 id="considerations-for-unmirrored-aggregates-and-crs-metadata-volume-and-data-svm-root-volumes">Considerations for unmirrored aggregates and CRS metadata volume and data SVM root volumes</h3>
<div class="paragraph">
<p>The configuration replication service (CRS) metadata volume and data SVM root volumes must be on a mirrored aggregate. You cannot move these volumes to unmirrored aggregate. If they are on unmirrored aggregate, negotiated switchover and switchback operations are vetoed. The metrocluster check command provides a warning if this is the case.</p>
</div>
</div>
<div class="sect2">
<h3 id="considerations-for-unmirrored-aggregates-and-svms">Considerations for unmirrored aggregates and SVMs</h3>
<div class="paragraph">
<p>SVMs should be configured on mirrored aggregates only or on unmirrored aggregates only. Configuring a mix of unmirrored and mirrored aggregates can result in a switchover operation that exceeds 120 seconds and result in a data outage if the unmirrored aggregates do not come online.</p>
</div>
</div>
<div class="sect2">
<h3 id="considerations-for-unmirrored-aggregates-and-san">Considerations for unmirrored aggregates and SAN</h3>
<div class="paragraph">
<p>A LUN should not be located on an unmirrored aggregate. Configuring a LUN on an unmirrored aggregate can result in a switchover operation that exceeds 120 seconds and a data outage.</p>
</div>
</div>
<div class="sect2">
<h3 id="considerations-for-adding-storage-shelves-for-unmirrored-aggregates">Considerations for adding storage shelves for unmirrored aggregates</h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you are adding shelves that will be used for unmirrored aggregates in a MetroCluster IP configuration, you must do the following:
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Before starting the procedure to add the shelves, issue the following command: <code>metrocluster modify -enable-unmirrored-aggr-deployment true</code></p>
</li>
<li>
<p>Verify that automatic disk assignment is off: <code>disk option show</code></p>
</li>
<li>
<p>Follow the steps of the procedure to add the shelf.</p>
</li>
<li>
<p>Manually assign all disks from new shelf to the node that will own the unmirrored aggregate or aggregates.</p>
</li>
<li>
<p>Create the aggregates using the storage aggregate create command. .</p>
</li>
<li>
<p>After completing the procedure, issue the following command: <code>metrocluster modify -enable-unmirrored-aggr-deployment false</code></p>
</li>
<li>
<p>Verify that automatic disk assignment is enabled: <code>disk option show</code></p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="considerations-for-firewall-usage-at-metrocluster-sites">Considerations for firewall usage at MetroCluster sites</h2>
<div class="sectionbody">
<div class="paragraph lead">
<p>If you are using a firewall at a MetroCluster site, you must ensure access for certain required ports.</p>
</div>
<div class="paragraph">
<p>The following table shows TCP/UDP port usage in an external firewall positioned between two MetroCluster sites.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Traffic type</th>
<th class="tableblock halign-left valign-top">Port/services</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Cluster peering</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>11104 / TCP</p>
</div>
<div class="paragraph">
<p>11105 / TCP</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>ONTAP System Manager</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>443 / TCP</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>MetroCluster IP intercluster LIFs</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>65200 / TCP</p>
</div>
<div class="paragraph">
<p>10006 / TCP and UDP</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Hardware assist</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>4444 / TCP</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="preconfigured-settings-for-new-metrocluster-systems-from-the-factory">Preconfigured settings for new MetroCluster systems from the factory</h2>
<div class="sectionbody">
<div class="paragraph lead">
<p>New MetroCluster nodes are preconfigured with a root aggregate. Additional hardware and software settings are configured using the detailed procedures provided in this guide.</p>
</div>
<div class="sect2">
<h3 id="hardware-racking-and-cabling">Hardware racking and cabling</h3>
<div class="paragraph">
<p>Depending on the configuration you ordered, you might need to rack the systems and complete the cabling.</p>
</div>
</div>
<div class="sect2">
<h3 id="software-configuration-of-the-metrocluster-configuration">Software configuration of the MetroCluster configuration</h3>
<div class="paragraph">
<p>Nodes received with the new MetroCluster configuration are preconfigured with a single root aggregate. Additional configuration must be performed using the detailed procedures provided in this guide.</p>
</div>
</div>
<div class="sect2">
<h3 id="hardware-setup-checklist">Hardware setup checklist</h3>
<div class="paragraph lead">
<p>You need to know which hardware setup steps were completed at the factory and which steps you need to complete at each MetroCluster site.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Step</th>
<th class="tableblock halign-left valign-top">Completed at factory</th>
<th class="tableblock halign-left valign-top">Completed by you</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Mount components in one or more cabinets.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Yes</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Position cabinets in the desired location.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>YesPosition them in the original order so that the supplied cables are long enough.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Connect multiple cabinets to each other, if applicable.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>YesUse the cabinet interconnect kit if it is included in the order. The kit box is labeled.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Secure the cabinets to the floor, if applicable.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>YesUse the universal bolt-down kit if it is included in the order. The kit box is labeled.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Cable the components within the cabinet.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>YesCables 5 meters and longer are removed for shipping and placed in the accessories box.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Connect the cables between cabinets, if applicable.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>YesCables are in the accessories box.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Connect management cables to the customer&#8217;s network.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>YesConnect them directly or through the CN1601 management switches, if present.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
To avoid address conflicts, do not connect management ports to the customer&#8217;s network until after you change the default IP addresses to the customer&#8217;s values.
</td>
</tr>
</table>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Connect console ports to the customer&#8217;s terminal server, if applicable.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Yes</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Connect the customer&#8217;s data cables to the cluster.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Yes</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Connect the cabinets to power and power on the components.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>YesPower them on in the following order:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>PDUs</p>
</li>
<li>
<p>Disk shelves</p>
</li>
<li>
<p>Nodes</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Assign IP addresses to the management ports of the cluster switches and to the management ports of the management switches, if present.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Yes Connect to the serial console port of each switch and log in with user name &#8220;admin&#8221; with no password.</p>
</div>
<div class="paragraph">
<p>Suggested management addresses are 10.10.10.81, 10.10.10.82, 10.10.10.83, and 10.10.10.84.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Verify cabling by running the Config Advisor tool.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Yes</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>

    </article>
    <!-- Page Container -->
  </div>

  
  <!-- Start Page Toolbar -->
  <div class="page-nav-toolbar">
    <div class="page-nav-contribute"  >
      <div class="page-nav-contribute-title">CONTRIBUTE</div>
      <a target="_blank" href="https://github.com/NetAppDocs/ontap-metrocluster/blob/main/install-ip/concept_prepare_for_the_mcc_installation.adoc" class="btn btn-default githubEditButton" role="button"><img src="/us-en/ontap-metrocluster/images/github.png" class="github-icon" />Edit on GitHub</a>
      <a target="_blank" href="https://github.com/NetAppDocs/ontap-metrocluster/issues/new?body=Page%3A%20[Preparing for the MetroCluster installation](https://docs.netapp.com/us-en/ontap-metrocluster/install-ip/concept_prepare_for_the_mcc_installation.html)" class="btn btn-default githubEditButton" role="button"><img src="/us-en/ontap-metrocluster/images/github.png" class="github-icon" />Request doc changes</a>
      <a target="_blank" href="https://docs.netapp.com/us-en/contribute/" class="page-nav-contribute-link"  >Contributor's Guide</a>
    </div>
    <div class="page-nav-container">
      <nav class="page-nav-fixed">
        <div class="page-nav-title">ON THIS PAGE</div>
        <div class="page-nav-links">
          <ul class="page-nav-inner" id="page-menu"></ul>
        </div>
      </nav>
    </div>
  </div>
  
  <div style="clear: both"></div><!-- Main needs to have height -->
</div>

        </main>

        <footer class="n-footer">
  <div class="n-footer__bottom">
    <div class="n-container">
      <div class="n-footer__bottom-left">

        <div class="n-footer__copyright">
          <ul class="n-footer__copyright-list">
            <li class="n-footer__copyright-link">
            <a href="https://www.netapp.com/us/legal/copyright.aspx">© 2021 NetApp, Inc.</a>
            </li>

</ul>
</div>
<div class="n-footer__social-links">
<ul class="n-footer__social-link-list">
<li class="n-footer__social-link-list-item">
<a class="n-footer__social-link" data-ntap-social="follow-blog" href="https://blog.netapp.com" target="_blank" title="blog" alt="blog">
<span class="n-footer__social-link-text">blog</span>
<svg class="n-icon-blog n-footer__social-link-icon" aria-labelledby="title">
  <title>blog@</title>
  <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/us-en/ontap-metrocluster/common/svg/sprite.svg#blog"></use>
</svg>

</a>
</li>
<li class="n-footer__social-link-list-item">
<a class="n-footer__social-link" data-ntap-social="follow-community" href="https://community.netapp.com/" target="_blank" title="community" alt="community">
<span class="n-footer__social-link-text">community</span>
<svg class="n-icon-community n-footer__social-link-icon" aria-labelledby="title">
<title>community@</title>
<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/us-en/ontap-metrocluster/common/svg/sprite.svg#comments"></use>
</svg>

</a>
</li>
<li class="n-footer__social-link-list-item">
<a class="n-footer__social-link" data-ntap-social="follow-twitter" href="https://twitter.com/netapp" target="_blank" title="twitter" alt="twitter">
<span class="n-footer__social-link-text">twitter</span>
<svg class="n-icon-twitter n-footer__social-link-icon" aria-labelledby="title">
<title>twitter@</title>
<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/us-en/ontap-metrocluster/common/svg/sprite.svg#twitter"></use>
</svg>

</a>
</li>
<li class="n-footer__social-link-list-item">
<a class="n-footer__social-link" data-ntap-social="follow-facebook" href="https://www.facebook.com/NetApp" target="_blank" title="facebook" alt="facebook">
<span class="n-footer__social-link-text">facebook</span>
<svg class="n-icon-facebook n-footer__social-link-icon" aria-labelledby="title">
<title>facebook@</title>
<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/us-en/ontap-metrocluster/common/svg/sprite.svg#facebook"></use>
</svg>

</a>
</li>
<li class="n-footer__social-link-list-item">
<a class="n-footer__social-link" data-ntap-social="follow-linkedin" href="https://www.linkedin.com/company/netapp" target="_blank" title="linkedin" alt="linkedin">
<span class="n-footer__social-link-text">linkedin</span>
<svg class="n-icon-linkedin n-footer__social-link-icon" aria-labelledby="title">
<title>linkedin@</title>
<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/us-en/ontap-metrocluster/common/svg/sprite.svg#linkedin"></use>
</svg>

</a>
</li>
<li class="n-footer__social-link-list-item">
<a class="n-footer__social-link" data-ntap-social="follow-youtube" href="https://www.youtube.com/user/NetAppTV" target="_blank" title="youtube" alt="youtube">
<span class="n-footer__social-link-text">youtube</span>
<svg class="n-icon-youtube n-footer__social-link-icon" aria-labelledby="title">
<title>youtube@</title>
<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/us-en/ontap-metrocluster/common/svg/sprite.svg#youtube"></use>
</svg>

</a>
</li>
<li class="n-footer__social-link-list-item">
<a class="n-footer__social-link" data-ntap-social="follow-slideshare" href="https://www.slideshare.net/NetApp" target="_blank" title="slideshare" alt="slideshare">
<span class="n-footer__social-link-text">slideshare</span>
<svg class="n-icon-slideshare n-footer__social-link-icon" aria-labelledby="title">
<title>slideshare@</title>
<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/us-en/ontap-metrocluster/common/svg/sprite.svg#slideshare"></use>
</svg>

</a>
</li>
</ul>
</div>

</div>
<div class="n-footer__bottom-right">
  <p class="n-footer__fine-print">Have feedback for our website?<a target="_self" href="javascript:netapp_mailto()" class="n-footer__copyright">Let us know</a>
  <a href="https://docs.netapp.com/us-en/announcements/" class="n-footer__copyright">Announcements</a>
  </p>
</div>
</div>
</div>
</footer>

      </div>

      <!-- Elasticsearch JS -->
      <script type="text/javascript" src='/us-en/ontap-metrocluster/js/bundle.js'></script>

      <!-- Syntax Highlighting -->
      <script type="text/javascript" src='/us-en/ontap-metrocluster/js/prism.js'></script>
      <script type="text/javascript" src='/us-en/ontap-metrocluster/js/prism-curl.js'></script>
    </div>
    <script>
      document.body.offsetWidth=1903;
      cookieLaw = {}
      cookieLaw.euCountry = "US";
      cookieLaw.invoke = function(){return false;}
    </script>
    <script src='/us-en/ontap-metrocluster/js/www-ntap.js'></script>
  </body>

  
</html>
